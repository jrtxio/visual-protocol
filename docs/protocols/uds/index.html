<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ UDSåè®®å­¦ä¹ å¹³å° - Visual Protocol</title>
    <meta name="description" content="äº¤äº’å¼UDSåè®®å­¦ä¹ å¹³å° - 15åˆ†é’Ÿæé€ŸæŒæ¡ç»Ÿä¸€è¯Šæ–­æœåŠ¡åè®®">
    <meta name="keywords" content="UDSåè®®, æ±½è½¦è¯Šæ–­, ISO 14229, ECUè¯Šæ–­, è½¦è½½ç½‘ç»œ">
    <meta name="author" content="Visual Protocol Team">
    
    <!-- SEO and Social Media -->
    <meta property="og:title" content="Visual Protocol - UDSåè®®å­¦ä¹ å¹³å°">
    <meta property="og:description" content="äº¤äº’å¼UDSåè®®å­¦ä¹ å¹³å° - 15åˆ†é’Ÿæé€ŸæŒæ¡ç»Ÿä¸€è¯Šæ–­æœåŠ¡åè®®">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://jrtxio.github.io/visual-uds/protocols/uds/">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ”§</text></svg>">
    
    <style>
        :root {
            /* Color system */
            --primary-gradient-start: #667eea;
            --primary-gradient-end: #764ba2;
            --client-color: #4CAF50;
            --server-color: #2196F3;
            --success-color: #4CAF50;
            --success-hover: #45a049;
            --error-color: #f44336;
            --warning-color: #ff9800;
            --info-color: #2196F3;
            --bg-light: #f8f9fa;
            --bg-card-light: #ffffff;
            --border-light: #dee2e6;
            --text-light-main: #333;
            --text-light-secondary: #666;
            --shadow-light: rgba(0,0,0,0.1);
            --bg-dark: #1a1a1a;
            --bg-card-dark: #2d2d2d;
            --text-dark-main: #f0f0f0;
            --text-dark-secondary: #ccc;
            --border-dark: #555;
            --shadow-dark: rgba(0,0,0,0.4);
            
            /* Layout */
            --container-max-width: 1200px;
            --border-radius: 12px;
            --spacing-xxs: 4px;
            --spacing-xs: 8px;
            --spacing-sm: 12px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-xxl: 48px;
            
            /* Typography */
            --font-family-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-xxl: 1.5rem;
            --font-size-xxxl: 2rem;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-bold: 600;
            --font-weight-extra-bold: 700;
            
            /* Animation */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color var(--transition-normal), 
                        color var(--transition-normal), 
                        border-color var(--transition-normal);
        }

        body {
            font-family: var(--font-family-primary);
            background: var(--bg-light);
            color: var(--text-light-main);
            min-height: 100vh;
            line-height: 1.6;
        }

        body[data-theme="dark"] {
            background: var(--bg-dark);
            color: var(--text-dark-main);
        }

        .container {
            max-width: var(--container-max-width);
            margin: 0 auto;
            padding: var(--spacing-md);
        }

        .header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
            padding: var(--spacing-lg) 0;
        }

        .header h1 {
            font-size: var(--font-size-xxxl);
            margin-bottom: var(--spacing-sm);
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: var(--font-size-lg);
            color: var(--text-light-secondary);
        }

        body[data-theme="dark"] .header p {
            color: var(--text-dark-secondary);
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: var(--spacing-sm);
            margin: var(--spacing-xl) 0;
            flex-wrap: wrap;
            background: rgba(102, 126, 234, 0.1);
            padding: var(--spacing-md);
            border-radius: 30px;
            backdrop-filter: blur(10px);
        }

        body[data-theme="dark"] .nav-tabs {
            background: rgba(0,0,0,0.2);
        }

        .tab-button {
            padding: var(--spacing-md) var(--spacing-xl);
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all var(--transition-normal);
            font-weight: var(--font-weight-bold);
            font-size: var(--font-size-base);
            min-width: 120px;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .tab-button.active {
            background: white;
            color: var(--primary-gradient-start);
        }

        body[data-theme="dark"] .tab-button {
            background: linear-gradient(135deg, #667eea80, #764ba280);
        }

        body[data-theme="dark"] .tab-button.active {
            background: var(--primary-gradient-start);
            color: white;
        }

        /* Content Sections */
        .content-section {
            display: none;
            background: var(--bg-card-light);
            color: var(--text-light-main);
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            margin: var(--spacing-lg) 0;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 1px solid var(--border-light);
        }

        body[data-theme="dark"] .content-section {
            background: var(--bg-card-dark);
            color: var(--text-dark-main);
            border-color: var(--border-dark);
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }

        .content-section.active {
            display: block;
            animation: fadeIn var(--transition-normal);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: var(--font-size-xxl);
            margin-bottom: var(--spacing-lg);
            color: var(--primary-gradient-start);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        body[data-theme="dark"] .section-title {
            color: #8a9bff;
        }

        /* Device Communication */
        .device-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--spacing-xxl);
            margin: var(--spacing-xxl) 0;
            flex-wrap: wrap;
        }

        .device {
            width: 120px;
            height: 80px;
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: var(--font-weight-bold);
            transition: all var(--transition-normal);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }

        .device-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 0 5px;
        }

        .device-icon {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-xs);
            line-height: 1;
        }

        .device-name {
            font-size: 0.8rem;
            margin-bottom: var(--spacing-xs);
            line-height: 1.2;
        }

        .device-status {
            font-size: 0.7rem;
            opacity: 0.9;
            line-height: 1.2;
        }

        .client {
            background: linear-gradient(135deg, var(--client-color), #45a049);
        }

        .server {
            background: linear-gradient(135deg, var(--server-color), #1976D2);
        }

        .connection-line {
            font-size: 3rem;
            color: #ccc;
            position: relative;
        }

        .connection-line::before {
            content: 'âŸ·';
        }

        /* Service Grid */
        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-lg);
            margin: var(--spacing-xl) 0;
        }

        .service-card {
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            color: white;
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: transform var(--transition-normal);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.1);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        body[data-theme="dark"] .service-card {
            background: linear-gradient(135deg, #667eea80, #764ba280);
            border-color: rgba(255,255,255,0.1);
        }

        .service-card:hover {
            transform: translateY(-5px) scale(1.02);
        }

        .service-card h3 {
            margin-bottom: var(--spacing-sm);
            font-size: var(--font-size-base);
        }

        .service-card p {
            font-size: var(--font-size-xs);
            margin-bottom: var(--spacing-xs);
            opacity: 0.9;
        }

        .service-id {
            font-family: monospace;
            font-weight: var(--font-weight-bold);
            font-size: var(--font-size-sm);
            background: rgba(0,0,0,0.2);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 6px;
            margin-top: var(--spacing-xs);
            align-self: flex-start;
        }

        /* Demo Controls */
        .demo-controls {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            margin: var(--spacing-xl) 0;
            flex-wrap: wrap;
        }

        .demo-button {
            padding: var(--spacing-md) var(--spacing-xl);
            background: linear-gradient(135deg, var(--success-color), var(--success-hover));
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-bold);
            transition: transform var(--transition-fast);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .demo-button:hover {
            transform: translateY(-2px);
        }

        .demo-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        body[data-theme="dark"] .demo-button {
            background: linear-gradient(135deg, #4CAF50, #45a049);
        }

        /* Log Display */
        .log {
            background: #111;
            color: #0f0;
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            font-family: 'Courier New', monospace;
            text-align: left;
            max-width: 100%;
            margin: var(--spacing-lg) auto;
            min-height: 150px;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #333;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            font-size: var(--font-size-sm);
        }

        body[data-theme="dark"] .log {
            background: #000;
            border-color: #444;
        }

        .log-entry {
            margin-bottom: var(--spacing-xs);
            line-height: 1.4;
        }

        .log-timestamp {
            color: #aaa;
            margin-right: var(--spacing-xs);
        }

        .log-info {
            color: #0f0;
        }

        .log-warning {
            color: #ff9800;
        }

        .log-error {
            color: #f44336;
        }

        /* Protocol Stack Visualization */
        .protocol-stack-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: var(--spacing-md) 0;
            background: var(--bg-light);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
        }

        body[data-theme="dark"] .protocol-stack-container {
            background: var(--bg-card-dark);
        }

        .protocol-stack {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            width: 200px;
        }

        .protocol-layer {
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            color: white;
            padding: var(--spacing-sm);
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: var(--spacing-xs);
        }

        .protocol-layer.application { background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end)); }
        .protocol-layer.session { background: linear-gradient(135deg, #2196F3, #1976D2); }
        .protocol-layer.transport { background: linear-gradient(135deg, #FF9800, #F57C00); }
        .protocol-layer.network { background: linear-gradient(135deg, #9C27B0, #7B1FA2); }
        .protocol-layer.datalink { background: linear-gradient(135deg, #607D8B, #455A64); }

        .layer-name {
            font-weight: var(--font-weight-bold);
            font-size: var(--font-size-base);
        }

        .layer-desc {
            font-size: var(--font-size-sm);
            opacity: 0.9;
        }

        /* Tools Container */
        .tools-container {
            display: grid;
            gap: var(--spacing-xl);
            margin: var(--spacing-xl) 0;
        }

        .tool-card {
            background: var(--bg-card-light);
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        body[data-theme="dark"] .tool-card {
            background: var(--bg-card-dark);
            border-color: var(--border-dark);
            color: var(--text-dark-main);
        }

        .tool-title {
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-md);
            color: var(--primary-gradient-start);
        }

        body[data-theme="dark"] .tool-title {
            color: #8a9bff;
        }

        .tool-controls {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            margin: var(--spacing-md) 0;
        }

        .tool-input {
            flex: 1;
            min-width: 200px;
            padding: var(--spacing-sm);
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius);
            font-family: var(--font-family-primary);
            background: var(--bg-light);
            color: var(--text-light-main);
        }

        body[data-theme="dark"] .tool-input {
            background: var(--bg-card-dark);
            border-color: var(--border-dark);
            color: var(--text-dark-main);
        }

        .tool-button {
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--primary-gradient-start);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: var(--font-weight-bold);
        }

        body[data-theme="dark"] .tool-button {
            background: var(--primary-gradient-start);
        }

        /* Quiz System */
        .quiz-container {
            margin: var(--spacing-xl) 0;
        }

        .quiz-question {
            margin-bottom: var(--spacing-xl);
        }

        .quiz-title {
            font-size: var(--font-size-xl);
            margin-bottom: var(--spacing-md);
            font-weight: var(--font-weight-bold);
        }

        .quiz-options {
            display: grid;
            gap: var(--spacing-sm);
        }

        .quiz-option {
            background: var(--bg-card-light);
            border: 2px solid var(--border-light);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: var(--font-size-base);
            position: relative;
        }

        body[data-theme="dark"] .quiz-option {
            background: var(--bg-card-dark);
            border-color: var(--border-dark);
            color: var(--text-dark-main);
        }

        .quiz-option:hover {
            background: #e3f2fd;
            transform: translateY(-1px);
        }

        body[data-theme="dark"] .quiz-option:hover {
            background: #404040;
        }

        .quiz-option.correct {
            background: #d4edda !important;
            color: #155724 !important;
            border-color: #28a745 !important;
        }

        .quiz-option.wrong {
            background: #f8d7da !important;
            color: #721c24 !important;
            border-color: #dc3545 !important;
        }

        .quiz-option.selected {
            border-color: var(--primary-gradient-start) !important;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .quiz-option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .quiz-results {
            text-align: center;
            margin-top: var(--spacing-xxl);
        }

        .results-box {
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            color: white;
            padding: var(--spacing-xl);
            border-radius: var(--border-radius);
            margin: var(--spacing-lg) 0;
            font-size: var(--font-size-lg);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .modal-content {
            background: var(--bg-card-light);
            color: var(--text-light-main);
            border-radius: var(--border-radius);
            padding: 0;
            max-width: 90%;
            max-height: 80vh;
            width: 650px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            border: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
        }

        body[data-theme="dark"] .modal-content {
            background: var(--bg-card-dark);
            color: var(--text-dark-main);
            border-color: var(--border-dark);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-lg) var(--spacing-lg) var(--spacing-md);
            border-bottom: 1px solid var(--border-light);
        }

        body[data-theme="dark"] .modal-header {
            border-bottom-color: var(--border-dark);
        }

        .modal-header h3 {
            margin: 0;
            color: var(--primary-gradient-start);
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
        }

        body[data-theme="dark"] .modal-header h3 {
            color: #8a9bff;
        }

        .modal-close {
            background: rgba(0,0,0,0.1);
            border: none;
            font-size: var(--font-size-lg);
            cursor: pointer;
            color: var(--text-light-secondary);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--border-radius);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            background: rgba(0,0,0,0.2);
            color: var(--text-light-main);
            transform: scale(1.1);
        }

        body[data-theme="dark"] .modal-close {
            background: rgba(255,255,255,0.1);
            color: var(--text-dark-secondary);
        }

        body[data-theme="dark"] .modal-close:hover {
            background: rgba(255,255,255,0.2);
            color: var(--text-dark-main);
        }

        .modal-body {
            padding: var(--spacing-lg);
            overflow-y: auto;
            flex: 1;
        }

        .modal-content-formatted {
            line-height: 1.6;
        }

        .modal-service-title {
            margin: 0 0 var(--spacing-md) 0;
            color: var(--primary-gradient-start);
            font-size: var(--font-size-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        body[data-theme="dark"] .modal-service-title {
            color: #8a9bff;
        }

        .modal-sid {
            background: rgba(102, 126, 234, 0.15);
            color: var(--primary-gradient-start);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 6px;
            font-family: monospace;
            font-size: var(--font-size-sm);
        }

        body[data-theme="dark"] .modal-sid {
            background: rgba(138, 155, 255, 0.2);
            color: #8a9bff;
        }

        .modal-field {
            margin-bottom: var(--spacing-sm);
            padding: var(--spacing-xs) 0;
        }

        .modal-field strong {
            display: inline-block;
            width: 100px;
            color: var(--primary-gradient-start);
        }

        body[data-theme="dark"] .modal-field strong {
            color: #8a9bff;
        }

        .field-value {
            color: var(--text-light-main);
        }

        body[data-theme="dark"] .field-value {
            color: var(--text-dark-main);
        }

        .value-yes {
            color: #4CAF50;
            font-weight: var(--font-weight-bold);
        }

        .value-no {
            color: #f44336;
            font-weight: var(--font-weight-bold);
        }

        .modal-section-title {
            margin: var(--spacing-lg) 0 var(--spacing-sm) 0;
            padding-bottom: var(--spacing-xs);
            border-bottom: 1px solid var(--border-light);
            color: var(--primary-gradient-start);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-bold);
        }

        body[data-theme="dark"] .modal-section-title {
            border-bottom-color: var(--border-dark);
            color: #8a9bff;
        }

        .modal-list {
            margin: 0 0 var(--spacing-md) 0;
            padding-left: var(--spacing-lg);
        }

        .modal-list-item {
            margin-bottom: var(--spacing-xs);
            line-height: 1.5;
        }

        .modal-paragraph {
            margin: var(--spacing-sm) 0;
            line-height: 1.6;
        }

        .modal-footer {
            padding: var(--spacing-md) var(--spacing-lg);
            border-top: 1px solid var(--border-light);
            text-align: right;
            background: var(--bg-light);
        }

        body[data-theme="dark"] .modal-footer {
            border-top-color: var(--border-dark);
            background: var(--bg-dark);
        }

        body[data-theme="dark"] .modal-footer {
            border-top-color: var(--border-dark);
            background: var(--bg-dark);
        }

        .modal-footer .demo-button {
            padding: var(--spacing-sm) var(--spacing-lg);
            font-size: var(--font-size-base);
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: var(--spacing-lg);
            right: var(--spacing-lg);
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            color: white;
            border: none;
            border-radius: 25px;
            padding: var(--spacing-md) var(--spacing-lg);
            cursor: pointer;
            transition: all var(--transition-normal);
            font-weight: var(--font-weight-bold);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        body[data-theme="dark"] .theme-toggle {
            background: rgba(0,0,0,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        body[data-theme="dark"] .theme-toggle:hover {
            background: rgba(0,0,0,0.3);
        }

        /* Back Button */
        .back-button {
            position: fixed;
            top: var(--spacing-lg);
            left: var(--spacing-lg);
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            color: white;
            border: none;
            border-radius: 25px;
            padding: var(--spacing-md) var(--spacing-lg);
            cursor: pointer;
            transition: all var(--transition-normal);
            font-weight: var(--font-weight-bold);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        body[data-theme="dark"] .back-button {
            background: rgba(0,0,0,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        body[data-theme="dark"] .back-button:hover {
            background: rgba(0,0,0,0.3);
        }

        /* Responsive Design */
        @media screen and (max-width: 768px) {
            .container {
                padding: var(--spacing-sm);
            }

            .nav-tabs {
                flex-direction: column;
                align-items: center;
                padding: var(--spacing-sm);
                border-radius: var(--border-radius);
            }

            .tab-button {
                width: 100%;
                max-width: 250px;
                margin: var(--spacing-xs) 0;
                font-size: var(--font-size-sm);
            }

            .service-grid {
                grid-template-columns: 1fr;
            }

            .device-container {
                flex-direction: column;
                gap: var(--spacing-xl);
            }

            .demo-controls {
                flex-direction: column;
                align-items: center;
            }

            .demo-button {
                min-width: 200px;
            }

            .content-section {
                padding: var(--spacing-lg);
            }

            .header h1 {
                font-size: var(--font-size-xxl);
            }

            .section-title {
                font-size: var(--font-size-xl);
            }

            .device {
                width: 100px;
                height: 80px;
            }

            .device-icon {
                font-size: 1.5rem;
            }
        }

        @media screen and (max-width: 480px) {
            .header h1 {
                font-size: var(--font-size-xl);
            }

            .tab-button {
                padding: var(--spacing-sm) var(--spacing-md);
                min-width: 100px;
                font-size: var(--font-size-sm);
            }

            .device {
                width: 100px;
                height: 80px;
            }

            .device-icon {
                font-size: 1.5rem;
            }

            .log {
                min-height: 120px;
                max-height: 200px;
                font-size: var(--font-size-xs);
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .device.pulse {
            animation: pulse 1s infinite;
        }

        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        .device.blink {
            animation: blink 0.5s infinite;
        }
        
        /* Protocol Layer Animations */
        @keyframes layerPulse {
            0% { transform: scale(1.05); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1.05); }
        }
        
        .protocol-layer.active {
            animation: layerPulse 0.8s ease-in-out;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.6) !important;
        }
        
        /* Connection Line Animation */
        @keyframes connectionPulse {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        .connection-line.animated {
            animation: connectionPulse 1s infinite;
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus styles */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid #4CAF50;
            outline-offset: 2px;
        }

        /* Print styles */
        @media print {
            .theme-toggle,
            .back-button,
            .nav-tabs,
            .demo-controls {
                display: none;
            }
            
            .content-section {
                box-shadow: none;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢æ·±è‰²ä¸»é¢˜">ğŸŒ™ æ·±è‰²æ¨¡å¼</button>
    <button class="back-button" onclick="goBack()" aria-label="è¿”å›ä¸»é¡µ">ğŸ  è¿”å›ä¸»é¡µ</button>
    
    <div class="container">
        <header class="header" role="banner">
            <h1>ğŸ”§ UDSåè®®å­¦ä¹ å¹³å°</h1>
            <p>ç»Ÿä¸€è¯Šæ–­æœåŠ¡åè®® - 15åˆ†é’Ÿæé€ŸæŒæ¡</p>
        </header>

        <nav class="nav-tabs" role="tablist" aria-label="ä¸»è¦å†…å®¹å¯¼èˆª">
            <button class="tab-button active" role="tab" aria-selected="true" aria-controls="basics-tab" data-tab="basics">
                ğŸ¯ åŸºç¡€æ¦‚å¿µ
            </button>
            <button class="tab-button" role="tab" aria-selected="false" aria-controls="services-tab" data-tab="services">
                ğŸ”§ æœåŠ¡è¯¦è§£
            </button>
            <button class="tab-button" role="tab" aria-selected="false" aria-controls="demo-tab" data-tab="demo">
                ğŸ® äº¤äº’æ¼”ç¤º
            </button>
            <button class="tab-button" role="tab" aria-selected="false" aria-controls="tools-tab" data-tab="tools">
                ğŸ› ï¸ å®ç”¨å·¥å…·
            </button>
            <button class="tab-button" role="tab" aria-selected="false" aria-controls="quiz-tab" data-tab="quiz">
                ğŸ§  çŸ¥è¯†æµ‹è¯•
            </button>
        </nav>

        <!-- åŸºç¡€æ¦‚å¿µæ ‡ç­¾ -->
        <section id="basics-tab" class="content-section active" role="tabpanel">
            <h2 class="section-title">ğŸ¯ UDSåè®®åŸºç¡€æ¦‚å¿µ</h2>
            <p>UDSï¼ˆç»Ÿä¸€è¯Šæ–­æœåŠ¡ï¼ŒUnified Diagnostic Servicesï¼‰æ˜¯ISO 14229æ ‡å‡†å®šä¹‰çš„æ±½è½¦è¯Šæ–­åè®®ï¼Œå…è®¸è¯Šæ–­å·¥å…·ä¸æ±½è½¦ç”µå­æ§åˆ¶å•å…ƒ(ECU)è¿›è¡ŒåŒå‘é€šä¿¡ã€‚UDSåè®®æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„è¯Šæ–­æœåŠ¡ï¼Œä½¿ä¸åŒåˆ¶é€ å•†çš„è¯Šæ–­å·¥å…·èƒ½å¤Ÿä¸å„ç§ECUè¿›è¡Œé€šä¿¡ã€‚</p>

            <div style="margin: var(--spacing-lg) 0; padding: var(--spacing-lg); background: var(--bg-card-light); border-radius: var(--border-radius); border: 1px solid var(--border-light);">
                <h3 style="color: var(--primary-gradient-start); margin-bottom: var(--spacing-md);">åè®®æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-md);">
                    <div style="padding: var(--spacing-md); border: 1px solid var(--border-light); border-radius: var(--border-radius); background: var(--bg-light);">
                        <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0; display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span>ğŸŒ</span> å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹
                        </h4>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                            UDSåè®®é‡‡ç”¨ç»å…¸çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ã€‚è¯Šæ–­è®¾å¤‡ï¼ˆå¦‚è¯Šæ–­ä»ªã€æµ‹è¯•è®¾å¤‡ï¼‰ä½œä¸ºå®¢æˆ·ç«¯ï¼Œè½¦è¾†ECUä½œä¸ºæœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¯Šæ–­è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åå¤„ç†å¹¶è¿”å›å“åº”ã€‚è¿™ç§æ¨¡å¼ç¡®ä¿äº†é€šä¿¡çš„æ–¹å‘æ€§å’Œæ§åˆ¶æ€§ã€‚</p>
                    </div>
                    
                    <div style="padding: var(--spacing-md); border: 1px solid var(--border-light); border-radius: var(--border-radius); background: var(--bg-light);">
                        <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0; display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span>ğŸ”§</span> æœåŠ¡å¯¼å‘æ¶æ„
                        </h4>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                            UDSåè®®å®šä¹‰äº†ä¸€ç»„æ ‡å‡†åŒ–çš„è¯Šæ–­æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ç”±å”¯ä¸€çš„æœåŠ¡IDï¼ˆSIDï¼‰æ ‡è¯†ã€‚æ¯ä¸ªæœåŠ¡æ‰§è¡Œç‰¹å®šåŠŸèƒ½ï¼Œå¦‚è¯»å–æ•°æ®ã€æ‰§è¡Œä¾‹ç¨‹ã€æ§åˆ¶ä¼šè¯ç­‰ã€‚æœåŠ¡IDé€šå¸¸ä¸ºä¸€ä¸ªå­—èŠ‚ï¼Œä¾‹å¦‚0x10è¡¨ç¤ºè¯Šæ–­ä¼šè¯æ§åˆ¶ï¼Œ0x27è¡¨ç¤ºå®‰å…¨è®¿é—®ã€‚</p>
                    </div>
                    
                    <div style="padding: var(--spacing-md); border: 1px solid var(--border-light); border-radius: var(--border-radius); background: var(--bg-light);">
                        <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0; display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span>ğŸ”’</span> åˆ†å±‚å®‰å…¨æœºåˆ¶
                        </h4>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                            UDSåè®®å®ç°äº†å¤šå±‚å®‰å…¨ä¿æŠ¤æœºåˆ¶ã€‚ä¼šè¯æ§åˆ¶ç®¡ç†ECUçš„å·¥ä½œçŠ¶æ€ï¼Œå®‰å…¨è®¿é—®é€šè¿‡ç§å­-å¯†é’¥æœºåˆ¶è®¤è¯ç”¨æˆ·æƒé™ï¼Œé€šä¿¡æ§åˆ¶å¯ä»¥æš‚æ—¶å…³é—­ECUçš„é€šä¿¡åŠŸèƒ½ã€‚è¿™äº›æœºåˆ¶å…±åŒä¿éšœäº†ECUçš„å®‰å…¨ã€‚</p>
                    </div>
                    
                    <div style="padding: var(--spacing-md); border: 1px solid var(--border-light); border-radius: var(--border-radius); background: var(--bg-light);">
                        <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0; display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span>ğŸ“ˆ</span> è¯Šæ–­æ•°æ®ç®¡ç†
                        </h4>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                            UDSåè®®æä¾›å…¨é¢çš„è¯Šæ–­æ•°æ®ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•…éšœç ï¼ˆDTCï¼‰ç®¡ç†ã€æ•°æ®è¯»å†™ã€ä¾‹ç¨‹æ§åˆ¶ç­‰ã€‚æ•…éšœç ç”¨äºè®°å½•è½¦è¾†æ•…éšœï¼Œæ•°æ®è¯»å†™ç”¨äºè·å–æˆ–ä¿®æ”¹ECUå‚æ•°ï¼Œä¾‹ç¨‹æ§åˆ¶ç”¨äºæ‰§è¡Œç‰¹å®šçš„è¯Šæ–­ç¨‹åºã€‚</p>
                    </div>
                    
                    <div style="padding: var(--spacing-md); border: 1px solid var(--border-light); border-radius: var(--border-radius); background: var(--bg-light);">
                        <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0; display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span>ğŸ”„</span> è¯Šæ–­ä¼šè¯ç®¡ç†
                        </h4>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                            UDSåè®®å®šä¹‰äº†ä¸åŒçš„è¯Šæ–­ä¼šè¯çº§åˆ«ï¼ˆé»˜è®¤ä¼šè¯ã€ç¼–ç¨‹ä¼šè¯ã€æ‰©å±•ä¼šè¯ç­‰ï¼‰ã€‚ä¼šè¯å†³å®šäº†ECUå“åº”å“ªäº›è¯Šæ–­æœåŠ¡ä»¥åŠå¯ç”¨çš„åŠŸèƒ½ã€‚ä¼šè¯ç®¡ç†æ˜¯UDSé€šä¿¡çš„ç¬¬ä¸€æ­¥ã€‚</p>
                    </div>
                    
                    <div style="padding: var(--spacing-md); border: 1px solid var(--border-light); border-radius: var(--border-radius); background: var(--bg-light);">
                        <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0; display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span>ğŸ”‘</span> å®‰å…¨è®¿é—®æœºåˆ¶
                        </h4>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                            UDSé€šè¿‡å®‰å…¨è®¿é—®æœåŠ¡ï¼ˆ0x27ï¼‰å®ç°å¤šçº§å®‰å…¨è®¤è¯ã€‚é‡‡ç”¨ç§å­-å¯†é’¥ç®—æ³•ï¼Œè¯Šæ–­å·¥å…·éœ€è·å–ç§å­å¹¶è®¡ç®—æ­£ç¡®å¯†é’¥æ‰èƒ½å®Œæˆè®¤è¯ï¼Œè®¿é—®å—ä¿æŠ¤çš„åŠŸèƒ½ï¼Œå¦‚ECUåˆ·å†™ã€‚</p>
                    </div>
                    
                    <div style="padding: var(--spacing-md); border: 1px solid var(--border-light); border-radius: var(--border-radius); background: var(--bg-light);">
                        <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0; display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span>ğŸ“Š</span> æ•…éšœç ç®¡ç†ç³»ç»Ÿï¼ˆDTCï¼‰
                        </h4>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                            UDSæä¾›å®Œæ•´çš„æ•…éšœç ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•…éšœç çš„å­˜å‚¨ã€è¯»å–ã€æ¸…é™¤ç­‰ã€‚æ•…éšœç æŒ‰ç…§æ ‡å‡†æ ¼å¼å®šä¹‰ï¼ŒåŒ…å«æ•…éšœç±»å‹ã€ç³»ç»Ÿå’Œå…·ä½“ä»£ç ä¿¡æ¯ï¼Œä¾¿äºæ•…éšœè¯Šæ–­å’Œç»´ä¿®ã€‚</p>
                    </div>
                    
                    <div style="padding: var(--spacing-md); border: 1px solid var(--border-light); border-radius: var(--border-radius); background: var(--bg-light);">
                        <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0; display: flex; align-items: center; gap: var(--spacing-xs);">
                            <span>ğŸ”„</span> ä¾‹è¡Œç¨‹åºæ§åˆ¶
                        </h4>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                            UDSæ”¯æŒåœ¨ECUä¸Šæ‰§è¡Œç‰¹å®šçš„è¯Šæ–­ä¾‹è¡Œç¨‹åºï¼Œå¦‚æ‰§è¡Œå™¨æµ‹è¯•ã€ä¼ æ„Ÿå™¨æ ¡éªŒã€ç³»ç»Ÿåˆå§‹åŒ–ç­‰ã€‚ä¾‹è¡Œç¨‹åºæ§åˆ¶å…è®¸è¯Šæ–­å·¥å…·è§¦å‘ECUæ‰§è¡Œé¢„å®šä¹‰çš„è¯Šæ–­åŠŸèƒ½ã€‚</p>
                    </div>
                </div>
                
                <h4 style="color: var(--primary-gradient-start); margin: var(--spacing-lg) 0 var(--spacing-sm); display: flex; align-items: center; gap: var(--spacing-xs);">
                    <span>ğŸ”„</span> åè®®æ ˆç»“æ„
                </h4>
                <p style="margin: 0 0 var(--spacing-md) 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">UDSåè®®éµå¾ªISOæ ‡å‡†çš„é€šä¿¡æ¨¡å‹ï¼Œåˆ†ä¸ºåº”ç”¨å±‚ã€ä¼šè¯å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚å’Œæ•°æ®é“¾è·¯å±‚ã€‚å„å±‚ååŒå·¥ä½œï¼Œç¡®ä¿è¯Šæ–­æ¶ˆæ¯ä»å®¢æˆ·ç«¯å¯é ä¼ è¾“åˆ°æœåŠ¡å™¨ã€‚ä¼ è¾“å±‚é€šè¿‡ISO-TPåè®®å¤„ç†è¶…è¿‡8å­—èŠ‚çš„é•¿æ¶ˆæ¯åˆ†æ®µä¼ è¾“ã€‚</p>
                
                <!-- Static Protocol Stack Visualization -->
                <div style="display: flex; justify-content: center; align-items: center; margin: var(--spacing-md) 0; background: var(--bg-light); border-radius: var(--border-radius); padding: var(--spacing-lg);">
                    <div style="display: flex; flex-direction: column; align-items: stretch; width: 200px;">
                        <div style="background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end)); color: white; padding: var(--spacing-md); border-radius: var(--border-radius); text-align: center; margin-bottom: var(--spacing-xs);">
                            <div style="font-weight: var(--font-weight-bold); font-size: var(--font-size-base);">åº”ç”¨å±‚</div>
                            <div style="font-size: var(--font-size-sm); opacity: 0.9;">UDSæœåŠ¡</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #2196F3, #1976D2); color: white; padding: var(--spacing-md); border-radius: var(--border-radius); text-align: center; margin-bottom: var(--spacing-xs);">
                            <div style="font-weight: var(--font-weight-bold); font-size: var(--font-size-base);">ä¼šè¯å±‚</div>
                            <div style="font-size: var(--font-size-sm); opacity: 0.9;">ä¼šè¯ç®¡ç†</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #FF9800, #F57C00); color: white; padding: var(--spacing-md); border-radius: var(--border-radius); text-align: center; margin-bottom: var(--spacing-xs);">
                            <div style="font-weight: var(--font-weight-bold); font-size: var(--font-size-base);">ä¼ è¾“å±‚</div>
                            <div style="font-size: var(--font-size-sm); opacity: 0.9;">ISO-TP</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #9C27B0, #7B1FA2); color: white; padding: var(--spacing-md); border-radius: var(--border-radius); text-align: center; margin-bottom: var(--spacing-xs);">
                            <div style="font-weight: var(--font-weight-bold); font-size: var(--font-size-base);">ç½‘ç»œå±‚</div>
                            <div style="font-size: var(--font-size-sm); opacity: 0.9;">CAN/Eth</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #607D8B, #455A64); color: white; padding: var(--spacing-md); border-radius: var(--border-radius); text-align: center;">
                            <div style="font-weight: var(--font-weight-bold); font-size: var(--font-size-base);">æ•°æ®é“¾è·¯</div>
                            <div style="font-size: var(--font-size-sm); opacity: 0.9;">ç‰©ç†æ¥å£</div>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: var(--spacing-md); padding: var(--spacing-md); background: rgba(102, 126, 234, 0.05); border-radius: var(--border-radius);">
                    <h4 style="color: var(--primary-gradient-start); margin: 0 0 var(--spacing-sm) 0;">UDSåè®®å…³é”®ç‰¹ç‚¹</h4>
                    <ul style="margin: 0 0 0 var(--spacing-lg); padding: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">
                        <li>æ ‡å‡†åŒ–ï¼šéµå¾ªISO 14229å›½é™…æ ‡å‡†ï¼Œç¡®ä¿ä¸åŒå‚å•†è®¾å¤‡é—´çš„äº’æ“ä½œæ€§</li>
                        <li>å¯æ‰©å±•ï¼šæ”¯æŒOEMç‰¹å®šçš„æ‰©å±•æœåŠ¡å’Œæ•°æ®æ ‡è¯†ç¬¦</li>
                        <li>å®‰å…¨æ€§ï¼šé€šè¿‡åˆ†å±‚å®‰å…¨æœºåˆ¶ä¿æŠ¤ECUå…å—æœªæˆæƒè®¿é—®</li>
                        <li>å…¼å®¹æ€§ï¼šæ”¯æŒCANã€ä»¥å¤ªç½‘ç­‰å¤šç§ä¼ è¾“ä»‹è´¨</li>
                        <li>å®ç”¨æ€§ï¼šè¦†ç›–å®Œæ•´çš„è½¦è¾†è¯Šæ–­å’Œç»´ä¿®éœ€æ±‚</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- æœåŠ¡è¯¦è§£æ ‡ç­¾ -->
        <section id="services-tab" class="content-section" role="tabpanel" hidden>
            <h2 class="section-title">ğŸ”§ 8å¤§æ ¸å¿ƒUDSæœåŠ¡è¯¦è§£</h2>
            <p>è¦†ç›–æ±½è½¦è¯Šæ–­çš„å®Œæ•´åŠŸèƒ½é›†ï¼Œä»ä¼šè¯ç®¡ç†åˆ°å›ºä»¶æ›´æ–°</p>

            <div id="servicesGrid">
                <!-- æœåŠ¡è¯¦ç»†ä»‹ç»å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </section>

        <!-- äº¤äº’æ¼”ç¤ºæ ‡ç­¾ -->
        <section id="demo-tab" class="content-section" role="tabpanel" hidden>
            <h2 class="section-title">ğŸ® äº¤äº’æ¼”ç¤ºï¼šå®æ—¶UDSé€šä¿¡</h2>
            <p>é€šè¿‡å¯è§†åŒ–åŠ¨ç”»ï¼Œè§‚å¯ŸUDSåè®®åœ¨è¯Šæ–­å·¥å…·å’Œè½¦è¾†ECUä¹‹é—´çš„å®Œæ•´é€šä¿¡æµç¨‹ã€‚</p>

            <div class="demo-controls">
                    <button class="demo-button" onclick="startDemo('session')" title="æ¼”ç¤ºè¯Šæ–­ä¼šè¯å»ºç«‹æµç¨‹">
                        ğŸ”„ ä¼šè¯å»ºç«‹æ¼”ç¤º
                    </button>
                    <button class="demo-button" onclick="startDemo('security')" title="æ¼”ç¤ºå®‰å…¨è®¿é—®æµç¨‹">
                        ğŸ” å®‰å…¨è®¿é—®æ¼”ç¤º
                    </button>
                    <button class="demo-button" onclick="startDemo('read')" title="æ¼”ç¤ºæ•°æ®è¯»å–æµç¨‹">
                        ğŸ“Š æ•°æ®è¯»å–æ¼”ç¤º
                    </button>
                    <button class="demo-button" onclick="startDemo('dtc')" title="æ¼”ç¤ºæ•…éšœç è¯»å–æµç¨‹">
                        âš ï¸ æ•…éšœç æ¼”ç¤º
                    </button>
                    <button class="demo-button" onclick="animateProtocolFlow()" title="æ¼”ç¤ºåè®®æ ˆä¸­æ•°æ®å¤„ç†æµç¨‹">
                        ğŸ“¹ åè®®æ ˆæµæ¼”ç¤º
                    </button>
                    <button class="demo-button" onclick="showProtocolMessageFlow()" title="å±•ç¤ºæ¶ˆæ¯åœ¨åè®®æ ˆä¸­çš„æµå‘">
                        ğŸ”„ æ¶ˆæ¯æµå‘æ¼”ç¤º
                    </button>
                    <button class="demo-button" onclick="showRequestResponseFlow()" title="å±•ç¤ºè¯·æ±‚å’Œå“åº”çš„å®Œæ•´æµç¨‹">
                        ğŸ”„ è¯·æ±‚-å“åº”æµç¨‹
                    </button>
                    <button class="demo-button" onclick="resetDemo()" aria-label="é‡ç½®æ¼”ç¤º" title="é‡ç½®æ¼”ç¤ºçŠ¶æ€">
                        ğŸ”„ é‡ç½®
                    </button>
                </div>

            <div class="device-container">
                <div class="device client" id="clientDevice">
                    <div class="device-content">
                        <div class="device-icon">ğŸ–¥ï¸</div>
                        <div class="device-name">è¯Šæ–­å·¥å…·</div>
                        <div class="device-status" id="clientStatus">å°±ç»ª</div>
                    </div>
                </div>
                <div class="connection-line" id="connectionLine" aria-hidden="true"></div>
                <div class="device server" id="serverDevice">
                    <div class="device-content">
                        <div class="device-icon">ğŸš—</div>
                        <div class="device-name">è½¦è¾†ECU</div>
                        <div class="device-status" id="serverStatus">å¾…æœº</div>
                    </div>
                </div>
            </div>

            <div id="communicationLog" class="log">
                <div class="log-entry">
                    <span class="log-timestamp">[12:00:00]</span>
                    <span class="log-info">ğŸ’¡ ç‚¹å‡»ä¸Šæ–¹ä»»æ„æŒ‰é’®å¼€å§‹å®æ—¶æ¼”ç¤º...</span>
                </div>
                <div class="log-entry">
                    <span class="log-timestamp">[12:00:00]</span>
                    <span class="log-info">ğŸ—£ï¸ ç³»ç»Ÿä¼šæ¨¡æ‹Ÿå®Œæ•´çš„UDSé€šä¿¡æµç¨‹</span>
                </div>
            </div>
        </section>

        <!-- å®ç”¨å·¥å…·æ ‡ç­¾ -->
        <section id="tools-tab" class="content-section" role="tabpanel" hidden>
            <h2 class="section-title">ğŸ› ï¸ å®ç”¨å·¥å…·é›†</h2>
            <p>ä¸ºUDSåè®®å¼€å‘å’Œè°ƒè¯•æä¾›ä¸“ä¸šå·¥å…·æ”¯æŒ</p>

            <div class="tools-container">
                <div class="tool-card">
                    <h3 class="tool-title">ğŸ“Š UDSæ¶ˆæ¯è§£æå™¨</h3>
                    <p>è§£æåå…­è¿›åˆ¶æ ¼å¼çš„UDSæ¶ˆæ¯ï¼Œæ˜¾ç¤ºå„å­—æ®µå«ä¹‰</p>
                    <div class="tool-controls">
                        <input type="text" class="tool-input" id="messageInput" placeholder="è¾“å…¥åå…­è¿›åˆ¶æ¶ˆæ¯ (å¦‚: 10 03 FF 00 00)" aria-label="UDSæ¶ˆæ¯è¾“å…¥">
                        <button class="tool-button" onclick="parseUDSMessage()">è§£æ</button>
                    </div>
                    <div id="parseResult" style="margin-top: var(--spacing-md);"></div>
                </div>

                <div class="tool-card">
                    <h3 class="tool-title">ğŸ”¢ åè¿›åˆ¶è½¬æ¢å™¨</h3>
                    <p>åœ¨åå…­è¿›åˆ¶ã€åè¿›åˆ¶ã€äºŒè¿›åˆ¶ä¹‹é—´è¿›è¡Œè½¬æ¢</p>
                    <div class="tool-controls">
                        <input type="text" class="tool-input" id="hexInput" placeholder="è¾“å…¥æ•°å€¼" aria-label="æ•°å€¼è¾“å…¥">
                        <button class="tool-button" onclick="convertNumber()">è½¬æ¢</button>
                    </div>
                    <div id="convertResult" style="margin-top: var(--spacing-md);"></div>
                </div>

                <div class="tool-card">
                    <h3 class="tool-title">ğŸ”§ æœåŠ¡IDæŸ¥è¯¢</h3>
                    <p>å¿«é€ŸæŸ¥æ‰¾UDSæœåŠ¡IDå¯¹åº”çš„åŠŸèƒ½æè¿°</p>
                    <div class="tool-controls">
                        <input type="text" class="tool-input" id="serviceIdInput" placeholder="è¾“å…¥æœåŠ¡ID (å¦‚: 0x10)" aria-label="æœåŠ¡IDè¾“å…¥">
                        <button class="tool-button" onclick="lookupServiceId()">æŸ¥è¯¢</button>
                    </div>
                    <div id="serviceResult" style="margin-top: var(--spacing-md);"></div>
                </div>

                <div class="tool-card">
                    <h3 class="tool-title">ğŸ“Š DID (æ•°æ®æ ‡è¯†ç¬¦) æŸ¥è¯¢</h3>
                    <p>æŸ¥æ‰¾DIDå¯¹åº”çš„è½¦è¾†æ•°æ®ä¿¡æ¯</p>
                    <div class="tool-controls">
                        <input type="text" class="tool-input" id="didInput" placeholder="è¾“å…¥DID (å¦‚: 0xF190)" aria-label="DIDè¾“å…¥">
                        <button class="tool-button" onclick="lookupDID()">æŸ¥è¯¢</button>
                    </div>
                    <div id="didResult" style="margin-top: var(--spacing-md);"></div>
                </div>

                <div class="tool-card">
                    <h3 class="tool-title">ğŸ”„ ä¾‹ç¨‹IDæŸ¥è¯¢</h3>
                    <p>æŸ¥æ‰¾ä¾‹ç¨‹IDå¯¹åº”çš„åŠŸèƒ½æè¿°</p>
                    <div class="tool-controls">
                        <input type="text" class="tool-input" id="routineIdInput" placeholder="è¾“å…¥ä¾‹ç¨‹ID (å¦‚: 0xFF00)" aria-label="ä¾‹ç¨‹IDè¾“å…¥">
                        <button class="tool-button" onclick="lookupRoutineId()">æŸ¥è¯¢</button>
                    </div>
                    <div id="routineResult" style="margin-top: var(--spacing-md);"></div>
                </div>
            </div>
        </section>

        <!-- çŸ¥è¯†æµ‹è¯•æ ‡ç­¾ -->
        <section id="quiz-tab" class="content-section" role="tabpanel" hidden>
            <h2 class="section-title">ğŸ§  çŸ¥è¯†æµ‹è¯•ï¼šUDSåè®®ä¸“å®¶è®¤è¯</h2>
            
            <div class="quiz-container" id="quizContainer">
                <div id="questionArea">
                    <!-- é—®é¢˜å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div id="quizResults" class="quiz-results" style="display: none;">
                    <div class="results-box">
                        <h3>ğŸ¯ æµ‹è¯•å®Œæˆï¼</h3>
                        <div>å¾—åˆ†: <span id="scoreValue" style="font-size:2rem;">0</span>/<span id="totalQuestions">0</span></div>
                        <div>æ­£ç¡®ç‡: <span id="percentage" style="font-size:2rem;">0%</span></div>
                    </div>
                    <button class="demo-button" onclick="restartQuiz()">ğŸ”„ é‡æ–°æµ‹è¯•</button>
                </div>
            </div>
        </section>
    </div>

    <script>
        // ======================
        // åº”ç”¨çŠ¶æ€ç®¡ç†
        // ======================
        let currentTab = 'basics';
        let quizState = {
            currentQuestion: 0,
            score: 0,
            answered: false
        };
        let demoActive = false;
        let progress = 0;

        // ======================
        // UDSæœåŠ¡æ•°æ®
        // ======================
        const UDS_SERVICES = {
            0x10: {
                name: "è¯Šæ–­ä¼šè¯æ§åˆ¶",
                description: "å»ºç«‹å’Œç®¡ç†ä¸åŒçº§åˆ«çš„è¯Šæ–­ä¼šè¯",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - é»˜è®¤ä¼šè¯ (Default Session)",
                    "â€¢ 0x02 - ç¼–ç¨‹ä¼šè¯ (Programming Session)", 
                    "â€¢ 0x03 - æ‰©å±•è¯Šæ–­ä¼šè¯ (Extended Diagnostic Session)",
                    "â€¢ 0x04-0xFF - OEMç‰¹å®šä¼šè¯ (OEM Specific Sessions)"
                ],
                examples: [
                    "è¯·æ±‚: 0x10 0x03 (è¿›å…¥æ‰©å±•ä¼šè¯)",
                    "å“åº”: 0x50 0x03 (ä¼šè¯å»ºç«‹æˆåŠŸ)",
                    "è¯·æ±‚: 0x10 0x01 (è¿›å…¥é»˜è®¤ä¼šè¯)",
                    "å“åº”: 0x50 0x01 (ä¼šè¯åˆ‡æ¢ç¡®è®¤)"
                ],
                useCase: "åœ¨è¿›è¡Œä»»ä½•è¯Šæ–­æ“ä½œå‰ï¼Œå¿…é¡»å…ˆå»ºç«‹è¯Šæ–­ä¼šè¯ã€‚é»˜è®¤ä¼šè¯æƒé™æœ€ä½ï¼ŒåŠŸèƒ½å—é™ï¼›æ‰©å±•ä¼šè¯æƒé™æœ€é«˜ï¼Œå¯è®¿é—®æ‰€æœ‰åŠŸèƒ½ã€‚",
                tip: "é»˜è®¤ä¼šè¯æƒé™æœ€ä½ï¼ŒåŠŸèƒ½å—é™ï¼›æ‰©å±•ä¼šè¯æƒé™æœ€é«˜ï¼Œå¯è®¿é—®æ‰€æœ‰åŠŸèƒ½ã€‚",
                knowledge: "è¯Šæ–­ä¼šè¯æ§åˆ¶æ˜¯UDSåè®®çš„å…¥å£ç‚¹ã€‚å®ƒå†³å®šäº†ECUå°†å“åº”å“ªäº›è¯Šæ–­æœåŠ¡ã€‚åœ¨ç¼–ç¨‹ä¼šè¯ä¸­ï¼ŒæŸäº›å®‰å…¨ç›¸å…³åŠŸèƒ½ä¼šè¢«ç¦ç”¨ä»¥ä¿æŠ¤ECUã€‚"
            },
            0x11: {
                name: "ECUé‡ç½®",
                description: "å¯¹ECUæ‰§è¡Œä¸åŒç±»å‹çš„é‡ç½®æ“ä½œ",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - ç¡¬é‡ç½®ï¼ˆHard Resetï¼Œéæ˜“å¤±æ€§å¤ä½ï¼‰",
                    "â€¢ 0x02 - è½¯é‡ç½®ï¼ˆSoft Resetï¼Œæ˜“å¤±æ€§å¤ä½ï¼‰",
                    "â€¢ 0x03 - å¼€å¯å¿«é€Ÿæ–­ç”µï¼ˆEnable Rapid Power Shutdownï¼‰",
                    "â€¢ 0x04-0xFF - OEMç‰¹å®šé‡ç½®ï¼ˆOEM Specific Resetï¼‰"
                ],
                examples: [
                    "è¯·æ±‚: 0x11 0x01 (ç¡¬é‡ç½®)",
                    "å“åº”: 0x51 0x01 (é‡ç½®æ‰§è¡Œ)",
                    "è¯·æ±‚: 0x11 0x02 (è½¯é‡ç½®)",
                    "å“åº”: 0x51 0x02 (é‡ç½®ç¡®è®¤)"
                ],
                useCase: "åœ¨åˆ·å†™ECUæˆ–è§£å†³è½¯ä»¶æ•…éšœæ—¶ä½¿ç”¨ã€‚ç¡¬é‡ç½®ç›¸å½“äºå®Œå…¨æ–­ç”µé‡å¯ï¼Œè½¯é‡ç½®åªé‡å¯å¤„ç†å™¨ã€‚",
                tip: "ç¡¬é‡ç½®ä¼šä¸¢å¤±æ˜“å¤±æ€§æ•°æ®ï¼Œè½¯é‡ç½®åˆ™ä¿ç•™RAMä¸­çš„æ•°æ®ã€‚",
                knowledge: "ECUé‡ç½®æœåŠ¡å…è®¸è¯Šæ–­è®¾å¤‡è§¦å‘ECUå†…éƒ¨çš„é‡å¯åºåˆ—ã€‚ç¡¬é‡ç½®ä¼šå®Œå…¨å…³é—­å¹¶é‡å¯ECUï¼Œå¯èƒ½å¯¼è‡´æœªä¿å­˜çš„æ•°æ®ä¸¢å¤±ã€‚è½¯é‡ç½®åªæ˜¯é‡å¯ECUçš„åº”ç”¨ç¨‹åºï¼Œä¿æŒRAMä¸­çš„æ•°æ®ã€‚"
            },
            0x27: {
                name: "å®‰å…¨è®¿é—®",
                description: "é€šè¿‡ç§å­-å¯†é’¥æœºåˆ¶å®ç°å®‰å…¨è®¤è¯",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - è¯·æ±‚ç§å­(0x01çº§)",
                    "â€¢ 0x02 - å‘é€å¯†é’¥(0x01çº§)",
                    "â€¢ 0x03 - è¯·æ±‚ç§å­(0x03çº§)",
                    "â€¢ 0x04 - å‘é€å¯†é’¥(0x03çº§)",
                    "â€¢ 0x05-0xFF - æ›´é«˜çº§åˆ«è®¤è¯"
                ],
                examples: [
                    "è¯·æ±‚ç§å­: 0x27 0x01",
                    "æ¥æ”¶ç§å­: 0x67 0x01 [SEED]",
                    "å‘é€å¯†é’¥: 0x27 0x02 [KEY]",
                    "è®¤è¯æˆåŠŸ: 0x67 0x02"
                ],
                useCase: "è®¿é—®å®‰å…¨åŠŸèƒ½ï¼ˆå¦‚ECUåˆ·å†™ï¼‰å‰å¿…é¡»è¿›è¡Œå®‰å…¨è®¤è¯",
                tip: "ç§å­å¯†é’¥ç®—æ³•ç”±ECUå†…éƒ¨å®ç°ï¼Œé€šå¸¸ä¸å¯é€†",
                knowledge: "å®‰å…¨è®¿é—®æ˜¯UDSä¸­æœ€é‡è¦å®‰å…¨æœºåˆ¶ä¹‹ä¸€ã€‚å®ƒä½¿ç”¨æŒ‘æˆ˜-å“åº”åè®®ï¼ŒECUç”Ÿæˆéšæœºç§å­ï¼Œè¯Šæ–­è®¾å¤‡ä½¿ç”¨ç‰¹å®šç®—æ³•è®¡ç®—å¯†é’¥ã€‚åªæœ‰ä½¿ç”¨æ­£ç¡®çš„ç®—æ³•å’Œå¯†é’¥æ‰èƒ½é€šè¿‡è®¤è¯ï¼Œè®¿é—®å—ä¿æŠ¤çš„åŠŸèƒ½ã€‚"
            },
            0x28: {
                name: "é€šä¿¡æ§åˆ¶",
                description: "æ§åˆ¶ECUçš„é€šä¿¡è¡Œä¸º",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x00 - å¯ç”¨æ¥æ”¶å’Œä¼ è¾“ (Enable Rx and Tx)",
                    "â€¢ 0x01 - å¯ç”¨æ¥æ”¶ç¦ç”¨ä¼ è¾“ (Enable Rx, Disable Tx)", 
                    "â€¢ 0x02 - ç¦ç”¨æ¥æ”¶å¯ç”¨ä¼ è¾“ (Disable Rx, Enable Tx)",
                    "â€¢ 0x03 - ç¦ç”¨æ¥æ”¶å’Œä¼ è¾“ (Disable Rx and Tx)"
                ],
                examples: [
                    "è¯·æ±‚: 0x28 0x03 (å…³é—­é€šä¿¡)",
                    "å“åº”: 0x68 0x03 (é€šä¿¡å·²å…³é—­)"
                ],
                useCase: "åœ¨ECUåˆ·å†™è¿‡ç¨‹ä¸­æš‚åœæ€»çº¿é€šä¿¡ï¼Œé¿å…å…¶ä»–ECUå¹²æ‰°åˆ·å†™è¿‡ç¨‹ã€‚",
                tip: "å…³é—­é€šä¿¡åECUä¸ä¼šå“åº”å…¶ä»–UDSè¯·æ±‚ï¼Œéœ€é‡æ–°å¯ç”¨",
                knowledge: "é€šä¿¡æ§åˆ¶æœåŠ¡ç”¨äºç®¡ç†ECUåœ¨æ€»çº¿ä¸Šçš„é€šä¿¡æ´»åŠ¨ã€‚åœ¨å¤šECUç¯å¢ƒä¸­ï¼Œæ­¤æœåŠ¡å¯ä»¥æš‚æ—¶æŠ‘åˆ¶ECUçš„æ­£å¸¸é€šä¿¡è¡Œä¸ºï¼Œè¿™å¯¹äºECUåˆ·å†™ç­‰éœ€è¦ç‹¬å æ€»çº¿çš„æ“ä½œéå¸¸æœ‰ç”¨ã€‚"
            },
            0x3E: {
                name: "å¾…æœºæ¡æ‰‹",
                description: "æµ‹è¯•ä»ªä¿æŒè¿æ¥çŠ¶æ€çš„æ¡æ‰‹ä¿¡å·",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x00 - æ— é¢å¤–åŠŸèƒ½ (No Additional Function)",
                    "â€¢ 0x01-0xFF - OEMç‰¹å®šåŠŸèƒ½ (OEM Specific Functions)"
                ],
                examples: [
                    "è¯·æ±‚: 0x3E 0x00 (å¾…æœºæ¡æ‰‹)",
                    "å“åº”: 0x7E 0x00 (æ¡æ‰‹ç¡®è®¤)"
                ],
                useCase: "åœ¨è¯Šæ–­ä¼šè¯æœŸé—´å®šæœŸå‘é€ä»¥ä¿æŒè¿æ¥",
                tip: "é€šå¸¸æ¯2-5ç§’å‘é€ä¸€æ¬¡ä»¥é˜²æ­¢ECUè¶…æ—¶æ–­å¼€è¿æ¥",
                knowledge: "å¾…æœºæ¡æ‰‹æœåŠ¡ç”¨äºç»´æŒè¯Šæ–­å·¥å…·ä¸ECUä¹‹é—´çš„è¿æ¥ã€‚åœ¨é•¿æ—¶é—´è¯Šæ–­æ“ä½œä¸­ï¼Œå®šæ—¶å‘é€æ¡æ‰‹ä¿¡å·å¯ä»¥é˜²æ­¢ECUå› è¶…æ—¶è€Œæ–­å¼€ä¼šè¯ã€‚"
            },
            0x83: {
                name: "è®¿é—®æ—¶é—´å‚æ•°",
                description: "ä¿®æ”¹æˆ–æ¢å¤ç½‘ç»œé€šä¿¡çš„æ—¶é—´å‚æ•°",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x00 - é»˜è®¤å€¼ (Default Values)",
                    "â€¢ 0x01 - è®¾ç½®æ—¶é—´å‚æ•° (Set Timing Parameters)",
                    "â€¢ 0x02 - æ¢å¤é»˜è®¤å€¼ (Restore Default Values)"
                ],
                examples: [
                    "è¯·æ±‚: 0x83 0x01 [å‚æ•°]",
                    "å“åº”: 0xC3 0x01 [ç¡®è®¤]"
                ],
                useCase: "è°ƒæ•´ECUé€šä¿¡çš„è¶…æ—¶å’Œå»¶è¿Ÿå‚æ•°",
                tip: "éœ€è¦ç‰¹æ®Šæƒé™æ‰èƒ½ä¿®æ”¹æ—¶é—´å‚æ•°",
                knowledge: "è®¿é—®æ—¶é—´å‚æ•°æœåŠ¡å…è®¸è°ƒæ•´è¯Šæ–­é€šä¿¡çš„æ—¶åºå‚æ•°ï¼Œå¦‚è¶…æ—¶æ—¶é—´å’Œé‡è¯•é—´éš”ï¼Œä»¥ä¼˜åŒ–è¯Šæ–­æ€§èƒ½ã€‚"
            },
            0x84: {
                name: "å®‰å…¨æ•°æ®ä¼ è¾“",
                description: "åŠ å¯†å’Œè§£å¯†å®‰å…¨ç›¸å…³çš„æ•°æ®ä¼ è¾“",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: false,
                details: [
                    "â€¢ åŠ å¯†æ•°æ®ä¼ è¾“",
                    "â€¢ å®‰å…¨è®¤è¯åè®®",
                    "â€¢ å¯†é’¥ç®¡ç†"
                ],
                examples: [
                    "è¯·æ±‚: 0x84 [åŠ å¯†æ•°æ®]",
                    "å“åº”: 0xC4 [è§£å¯†ç»“æœ]"
                ],
                useCase: "ä¼ è¾“æ•æ„Ÿæˆ–åŠ å¯†çš„è¯Šæ–­æ•°æ®",
                tip: "ç”¨äºé«˜çº§å®‰å…¨åŠŸèƒ½çš„æ•°æ®ä¼ è¾“",
                knowledge: "å®‰å…¨æ•°æ®ä¼ è¾“æœåŠ¡æä¾›åŠ å¯†çš„è¯Šæ–­é€šä¿¡åŠŸèƒ½ï¼Œä¿æŠ¤æ•æ„Ÿæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨ã€‚"
            },
            0x85: {
                name: "è¯Šæ–­æ•…éšœç è®¾ç½®æ§åˆ¶",
                description: "æ§åˆ¶DTCè®¾ç½®çŠ¶æ€",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - å¼€å¯DTCè®¾ç½® (ON)",
                    "â€¢ 0x02 - å…³é—­DTCè®¾ç½® (OFF)",
                    "â€¢ 0x03 - æ£€æŸ¥DTCè®¾ç½®çŠ¶æ€ (Check DTC Setting Status)"
                ],
                examples: [
                    "è¯·æ±‚: 0x85 0x02 (å…³é—­DTCè®¾ç½®)",
                    "å“åº”: 0xC5 0x02 (ç¡®è®¤)"
                ],
                useCase: "åœ¨ç‰¹å®šæµ‹è¯•æœŸé—´æš‚æ—¶ç¦ç”¨DTCè®¾ç½®",
                tip: "å…³é—­DTCè®¾ç½®åï¼Œæ•…éšœå°†ä¸ä¼šè¢«è®°å½•",
                knowledge: "è¯Šæ–­æ•…éšœç è®¾ç½®æ§åˆ¶æœåŠ¡å…è®¸ä¸´æ—¶ç¦ç”¨DTCè®°å½•åŠŸèƒ½ï¼Œå¸¸ç”¨äºæµ‹è¯•å’Œè°ƒè¯•åœºæ™¯ã€‚"
            },
            0x86: {
                name: "äº‹ä»¶å“åº”",
                description: "é…ç½®ECUå¯¹ç‰¹å®šäº‹ä»¶çš„å“åº”è¡Œä¸º",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - è®¾ç½®äº‹ä»¶å“åº” (Set Event Response)",
                    "â€¢ 0x02 - æ¸…é™¤äº‹ä»¶å“åº” (Clear Event Response)",
                    "â€¢ 0x03 - è·å–äº‹ä»¶å“åº”ä¿¡æ¯ (Get Event Response Information)"
                ],
                examples: [
                    "è¯·æ±‚: 0x86 0x01 [äº‹ä»¶ID]",
                    "å“åº”: 0xC6 0x01 [ç¡®è®¤]"
                ],
                useCase: "é…ç½®ECUå¯¹ç‰¹å®šæ¡ä»¶æˆ–äº‹ä»¶çš„å“åº”",
                tip: "å¯ç”¨äºæµ‹è¯•ç‰¹å®šæ•…éšœå“åº”æœºåˆ¶",
                knowledge: "äº‹ä»¶å“åº”æœåŠ¡å…è®¸é…ç½®ECUå¯¹ç‰¹å®šäº‹ä»¶çš„è‡ªåŠ¨å“åº”è¡Œä¸ºï¼Œæé«˜è¯Šæ–­çµæ´»æ€§ã€‚"
            },
            0x87: {
                name: "é“¾è·¯æ§åˆ¶",
                description: "æ§åˆ¶ç½‘ç»œé“¾è·¯çš„ç‰©ç†å‚æ•°",
                category: "è¯Šæ–­å’Œé€šä¿¡ç®¡ç†",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - è®¾ç½®é“¾è·¯å‚æ•° (Set Link Parameters)",
                    "â€¢ 0x02 - æ£€æŸ¥é“¾è·¯å‚æ•° (Check Link Parameters)"
                ],
                examples: [
                    "è¯·æ±‚: 0x87 0x01 [å‚æ•°]",
                    "å“åº”: 0xC7 0x01 [ç¡®è®¤]"
                ],
                useCase: "è°ƒæ•´ç½‘ç»œç‰©ç†å±‚å‚æ•°",
                tip: "ç”¨äºé«˜çº§ç½‘ç»œè¯Šæ–­å’Œä¼˜åŒ–",
                knowledge: "é“¾è·¯æ§åˆ¶æœåŠ¡æä¾›å¯¹ç½‘ç»œç‰©ç†å±‚å‚æ•°çš„ç²¾ç»†æ§åˆ¶ï¼Œä¼˜åŒ–é€šä¿¡æ€§èƒ½ã€‚"
            },
            0x22: {
                name: "é€šè¿‡IDè¯»æ•°æ®",
                description: "é€šè¿‡æ•°æ®æ ‡è¯†ç¬¦(DID)è¯»å–ECUæ•°æ®",
                category: "æ•°æ®ä¼ è¾“",
                hasSubFunctions: false,
                details: [
                    "â€¢ 0xF190 - è½¦è¾†è¯†åˆ«å·(VIN)",
                    "â€¢ 0xF193 - ç¡¬ä»¶ç‰ˆæœ¬å·",
                    "â€¢ 0xF197 - è½¯ä»¶ç‰ˆæœ¬å·",
                    "â€¢ 0xF198 - è½¯ä»¶é›¶ä»¶å·",
                    "â€¢ 0xF199 - ECUé›¶ä»¶å·"
                ],
                examples: [
                    "è¯·æ±‚VIN: 0x22 0xF1 0x90",
                    "å“åº”VIN: 0x62 0xF1 0x90 [17ä½VINç ]",
                    "è¯·æ±‚è½¯ä»¶ç‰ˆæœ¬: 0x22 0xF1 0x97",
                    "å“åº”è½¯ä»¶ç‰ˆæœ¬: 0x62 0xF1 0x97 [ç‰ˆæœ¬ä¿¡æ¯]"
                ],
                useCase: "è¯»å–ECUçš„æŠ€æœ¯å‚æ•°å’Œé…ç½®ä¿¡æ¯",
                tip: "ä¸åŒECUçš„DIDèŒƒå›´å¯èƒ½ä¸åŒï¼Œéœ€å‚è€ƒå…·ä½“æ–‡æ¡£",
                knowledge: "æ•°æ®è¯»å–æœåŠ¡æ˜¯UDSä¸­æœ€å¸¸ç”¨çš„æœåŠ¡ä¹‹ä¸€ï¼Œç”¨äºè·å–ECUä¸­çš„é™æ€æ•°æ®ã€‚DIDï¼ˆData Identifierï¼‰å®šä¹‰äº†ç‰¹å®šæ•°æ®çš„åœ°å€ã€‚æ¯ä¸ªDIDé€šå¸¸å¯¹åº”ECUå†…å­˜ä¸­çš„ç‰¹å®šä½ç½®ï¼Œå¯èƒ½åŒ…å«æ ‡å®šå‚æ•°ã€é…ç½®ä¿¡æ¯æˆ–ç¡¬ä»¶ç‰¹æ€§ã€‚"
            },
            0x23: {
                name: "é€šè¿‡åœ°å€è¯»æ•°æ®",
                description: "æ ¹æ®å†…å­˜åœ°å€è¯»å–ECUå†…å­˜æ•°æ®",
                category: "æ•°æ®ä¼ è¾“",
                hasSubFunctions: false,
                details: [
                    "â€¢ è¯»å–æŒ‡å®šå†…å­˜åœ°å€æ•°æ®",
                    "â€¢ æ”¯æŒå¤šç§åœ°å€æ ¼å¼",
                    "â€¢ å®‰å…¨è®¿é—®å¯èƒ½éœ€è¦"
                ],
                examples: [
                    "è¯·æ±‚: 0x23 [åœ°å€] [é•¿åº¦]",
                    "å“åº”: 0x63 [æ•°æ®]"
                ],
                useCase: "ç›´æ¥è®¿é—®ECUå†…å­˜ä¸­çš„ç‰¹å®šä½ç½®",
                tip: "éœ€è¦é€‚å½“çš„è®¿é—®æƒé™æ‰èƒ½è¯»å–å†…å­˜",
                knowledge: "é€šè¿‡åœ°å€è¯»æ•°æ®æœåŠ¡å…è®¸ç›´æ¥è®¿é—®ECUå†…å­˜ç©ºé—´ï¼Œæä¾›åº•å±‚æ•°æ®è®¿é—®èƒ½åŠ›ã€‚"
            },
            0x24: {
                name: "é€šè¿‡IDè¯»æ¯”ä¾‹æ•°æ®",
                description: "è¯»å–å¸¦æ ‡å®šä¿¡æ¯çš„æ•°æ®å€¼",
                category: "æ•°æ®ä¼ è¾“",
                hasSubFunctions: false,
                details: [
                    "â€¢ åŒ…å«ç‰©ç†å•ä½çš„æ ‡å®šæ•°æ®",
                    "â€¢ åŒ…å«æ¢ç®—å‚æ•°",
                    "â€¢ ç‰©ç†å€¼ = (å­˜å‚¨å€¼ Ã— å› å­) + åç§»"
                ],
                examples: [
                    "è¯·æ±‚: 0x24 [DID]",
                    "å“åº”: 0x64 [æ ‡å®šæ•°æ®]"
                ],
                useCase: "è¯»å–å¸¦æœ‰ç‰©ç†å•ä½çš„ä¼ æ„Ÿå™¨æ•°æ®",
                tip: "è¿”å›å€¼åŒ…å«æ¢ç®—æ‰€éœ€çš„æ ‡å®šå‚æ•°",
                knowledge: "é€šè¿‡IDè¯»æ¯”ä¾‹æ•°æ®æœåŠ¡ä¸“é—¨ç”¨äºè¯»å–éœ€è¦å•ä½è½¬æ¢çš„æ•°æ®ï¼Œç®€åŒ–æ•°æ®å¤„ç†æµç¨‹ã€‚"
            },
            0x2A: {
                name: "é€šè¿‡å‘¨æœŸIDè¯»æ•°æ®",
                description: "è¯»å–å‘¨æœŸæ€§å‘é€çš„æ•°æ®",
                category: "æ•°æ®ä¼ è¾“",
                hasSubFunctions: false,
                details: [
                    "â€¢ å‘¨æœŸæ€§æ•°æ®ä¼ è¾“",
                    "â€¢ æ”¯æŒå¤šç§ä¼ è¾“æ¨¡å¼",
                    "â€¢ å¯é…ç½®ä¼ è¾“é—´éš”"
                ],
                examples: [
                    "è¯·æ±‚: 0x2A [æ¨¡å¼] [ID]",
                    "å“åº”: 0x6A [æ•°æ®]"
                ],
                useCase: "è·å–å‘¨æœŸæ€§æ›´æ–°çš„ECUæ•°æ®",
                tip: "ç”¨äºå®æ—¶ç›‘æ§ECUçŠ¶æ€",
                knowledge: "é€šè¿‡å‘¨æœŸIDè¯»æ•°æ®æœåŠ¡æ”¯æŒå‘¨æœŸæ€§æ•°æ®ä¼ è¾“ï¼Œé€‚ç”¨äºåŠ¨æ€æ•°æ®ç›‘æ§ã€‚"
            },
            0x2C: {
                name: "åŠ¨æ€å®šä¹‰æ ‡è¯†ç¬¦",
                description: "åŠ¨æ€å®šä¹‰ç”¨äºæ•°æ®ä¼ è¾“çš„æ ‡è¯†ç¬¦",
                category: "æ•°æ®ä¼ è¾“",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - å®šä¹‰DID (Define DID)",
                    "â€¢ 0x02 - æ¸…é™¤DIDå®šä¹‰ (Clear DID Definition)",
                    "â€¢ 0x03 - æ¡ä»¶æ”¯æŒ (Conditional Support)"
                ],
                examples: [
                    "å®šä¹‰: 0x2C 0x01 [DID] [æºDID]",
                    "å“åº”: 0x6C 0x01 [ç¡®è®¤]"
                ],
                useCase: "åˆ›å»ºè‡ªå®šä¹‰çš„æ•°æ®ç»„åˆæ ‡è¯†ç¬¦",
                tip: "å…è®¸å°†å¤šä¸ªDIDåˆå¹¶ä¸ºä¸€ä¸ªé€»è¾‘æ•°æ®å•å…ƒ",
                knowledge: "åŠ¨æ€å®šä¹‰æ ‡è¯†ç¬¦æœåŠ¡å…è®¸åˆ›å»ºå¤åˆæ•°æ®æ ‡è¯†ç¬¦ï¼Œæé«˜æ•°æ®è®¿é—®æ•ˆç‡ã€‚"
            },
            0x2E: {
                name: "é€šè¿‡IDå†™æ•°æ®",
                description: "é€šè¿‡æ•°æ®æ ‡è¯†ç¬¦(DID)å†™å…¥ECUæ•°æ®",
                category: "æ•°æ®ä¼ è¾“",
                hasSubFunctions: false,
                details: [
                    "â€¢ å†™å…¥é…ç½®æ•°æ®",
                    "â€¢ ä¿®æ”¹ECUå‚æ•°",
                    "â€¢ éœ€è¦é€‚å½“æƒé™"
                ],
                examples: [
                    "è¯·æ±‚: 0x2E [DID] [æ•°æ®]",
                    "å“åº”: 0x6E [DID]"
                ],
                useCase: "ä¿®æ”¹ECUé…ç½®å‚æ•°",
                tip: "å†™å…¥æ“ä½œéœ€è¦å®‰å…¨è®¿é—®æƒé™",
                knowledge: "é€šè¿‡IDå†™æ•°æ®æœåŠ¡å…è®¸ä¿®æ”¹ECUä¸­çš„å¯é…ç½®å‚æ•°ï¼Œå®ç°è¿œç¨‹è°ƒä¼˜ã€‚"
            },
            0x3D: {
                name: "é€šè¿‡åœ°å€å†™å†…å­˜",
                description: "æ ¹æ®å†…å­˜åœ°å€å†™å…¥ECUå†…å­˜æ•°æ®",
                category: "æ•°æ®ä¼ è¾“",
                hasSubFunctions: false,
                details: [
                    "â€¢ ç›´æ¥å†™å…¥å†…å­˜",
                    "â€¢ é«˜é£é™©æ“ä½œ",
                    "â€¢ éœ€è¦ç‰¹æ®Šæƒé™"
                ],
                examples: [
                    "è¯·æ±‚: 0x3D [åœ°å€] [æ•°æ®]",
                    "å“åº”: 0x7D [ç¡®è®¤]"
                ],
                useCase: "ç›´æ¥ä¿®æ”¹ECUå†…å­˜å†…å®¹",
                tip: "è¿™æ˜¯ä¸€ä¸ªé«˜é£é™©æ“ä½œï¼Œå¯èƒ½å¯¼è‡´ECUæŸå",
                knowledge: "é€šè¿‡åœ°å€å†™å†…å­˜æœåŠ¡æä¾›åº•å±‚å†…å­˜å†™å…¥åŠŸèƒ½ï¼Œå¸¸ç”¨äºé«˜çº§è°ƒè¯•ã€‚"
            },
            0x14: {
                name: "æ¸…é™¤è¯Šæ–­ä¿¡æ¯",
                description: "æ¸…é™¤ECUä¸­å­˜å‚¨çš„è¯Šæ–­ä¿¡æ¯",
                category: "å­˜å‚¨æ•°æ®ä¼ è¾“",
                hasSubFunctions: false,
                details: [
                    "â€¢ æ¸…é™¤æ‰€æœ‰DTC",
                    "â€¢ æ¸…é™¤å†»ç»“å¸§æ•°æ®",
                    "â€¢ æ¸…é™¤æ•…éšœå†å²"
                ],
                examples: [
                    "è¯·æ±‚: 0x14 FF FF FF (æ¸…é™¤æ‰€æœ‰DTC)",
                    "å“åº”: 0x54 [ç¡®è®¤]"
                ],
                useCase: "åœ¨ç»´ä¿®å®Œæˆåæ¸…é™¤æ•…éšœè®°å½•",
                tip: "æ­¤æ“ä½œä¸å¯é€†ï¼Œè¯·åœ¨ç¡®è®¤ä¿®å¤åæ‰§è¡Œ",
                knowledge: "æ¸…é™¤è¯Šæ–­ä¿¡æ¯æœåŠ¡ç”¨äºåˆ é™¤ECUä¸­å­˜å‚¨çš„å†å²è¯Šæ–­ä¿¡æ¯ï¼Œä¸ºæ–°çš„è¯Šæ–­å‘¨æœŸåšå‡†å¤‡ã€‚"
            },
            0x19: {
                name: "è¯»å–æ•…éšœç ä¿¡æ¯",
                description: "è¯»å–ECUä¸­å­˜å‚¨çš„DTCä¿¡æ¯",
                category: "å­˜å‚¨æ•°æ®ä¼ è¾“",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - æŠ¥å‘Šæ”¯æŒçš„DTC (Report Supported DTC)",
                    "â€¢ 0x02 - æŠ¥å‘ŠDTCé•œåƒå†…å­˜ (Report DTC Mirror Memory)",
                    "â€¢ 0x04 - æŠ¥å‘Šç¡®è®¤çš„DTC (Report Confirmed DTC)",
                    "â€¢ 0x06 - æŠ¥å‘Šä¸¥é‡DTC (Report Severe DTC)",
                    "â€¢ 0x0A - æŠ¥å‘Šæ‰€æœ‰DTC (Report All DTC)"
                ],
                examples: [
                    "è¯·æ±‚: 0x19 0x0A (æŠ¥å‘Šæ‰€æœ‰DTC)",
                    "å“åº”: 0x59 0x0A [DTCåˆ—è¡¨]"
                ],
                useCase: "è·å–è½¦è¾†æ•…éšœè¯Šæ–­ä¿¡æ¯",
                tip: "ä¸åŒå­åŠŸèƒ½è¿”å›ä¸åŒç±»å‹çš„DTCä¿¡æ¯",
                knowledge: "DTCï¼ˆDiagnostic Trouble Codeï¼‰æ˜¯ECUæ£€æµ‹åˆ°ç³»ç»Ÿæ•…éšœæ—¶å­˜å‚¨çš„ä»£ç ã€‚DTCåŒ…å«æ•…éšœç±»å‹ã€ç³»ç»Ÿå’Œå…·ä½“æ•…éšœçš„ä¿¡æ¯ã€‚DTCsé€šå¸¸éµå¾ªæ ‡å‡†æ ¼å¼ï¼Œå¦‚P0123ï¼Œå…¶ä¸­Pè¡¨ç¤ºåŠ¨åŠ›ç³»ç»Ÿï¼Œ0è¡¨ç¤ºSAEæ ‡å‡†ï¼Œ1è¡¨ç¤ºæ•°å­—ç³»ç»Ÿï¼Œ23è¡¨ç¤ºå…·ä½“æ•…éšœã€‚"
            },
            0x2F: {
                name: "é€šè¿‡æ ‡è¯†ç¬¦æ§åˆ¶è¾“å…¥è¾“å‡º",
                description: "æ§åˆ¶ECUçš„è¾“å…¥è¾“å‡ºç«¯å£",
                category: "è¾“å…¥è¾“å‡ºæ§åˆ¶",
                hasSubFunctions: false,
                details: [
                    "â€¢ æ§åˆ¶ECUå†…éƒ¨ç»§ç”µå™¨",
                    "â€¢ æ§åˆ¶ä¼ æ„Ÿå™¨æ¨¡æ‹Ÿ",
                    "â€¢ æ§åˆ¶æ‰§è¡Œå™¨æµ‹è¯•"
                ],
                examples: [
                    "è¯·æ±‚: 0x2F [DID] [æ§åˆ¶å‚æ•°]",
                    "å“åº”: 0x6F [æ§åˆ¶ç»“æœ]"
                ],
                useCase: "æ‰§è¡Œå™¨åŠŸèƒ½æµ‹è¯•å’Œè¯Šæ–­",
                tip: "å¯ç”¨äºæ‰§è¡Œå™¨çš„åŠŸèƒ½éªŒè¯æµ‹è¯•",
                knowledge: "é€šè¿‡æ ‡è¯†ç¬¦æ§åˆ¶è¾“å…¥è¾“å‡ºæœåŠ¡æä¾›å¯¹ECUå¤–å›´è®¾å¤‡çš„ç›´æ¥æ§åˆ¶èƒ½åŠ›ã€‚"
            },
            0x31: {
                name: "ä¾‹è¡Œç¨‹åºæ§åˆ¶",
                description: "æ‰§è¡Œç‰¹å®šçš„è¯Šæ–­ä¾‹ç¨‹",
                category: "ä¾‹è¡Œç¨‹åº",
                hasSubFunctions: true,
                details: [
                    "â€¢ 0x01 - å¼€å§‹ä¾‹ç¨‹ (Start Routine)",
                    "â€¢ 0x02 - åœæ­¢ä¾‹ç¨‹ (Stop Routine)",
                    "â€¢ 0x03 - è·å–ä¾‹ç¨‹ç»“æœ (Request Routine Results)",
                    "â€¢ 0x04-0xFF - OEMç‰¹å®šä¾‹ç¨‹ID (OEM Specific Routine ID)"
                ],
                examples: [
                    "å¼€å§‹ä¾‹ç¨‹: 0x31 0x01 [ID] [å‚æ•°]",
                    "å“åº”: 0x71 0x01 [ID] [ç»“æœ]"
                ],
                useCase: "æ‰§è¡ŒECUå†…ç½®çš„è‡ªè¯Šæ–­å’Œæ ¡å‡†ç¨‹åº",
                tip: "ä¾‹ç¨‹æ§åˆ¶åŠŸèƒ½ä¸°å¯Œï¼Œå¯æ‰§è¡ŒECUç‰¹æœ‰çš„æµ‹è¯•ç¨‹åº",
                knowledge: "ä¾‹è¡Œç¨‹åºæ˜¯ECUå†…ç½®çš„ç‰¹å®šç®—æ³•æˆ–æµ‹è¯•ç¨‹åºï¼Œå¯ä»¥æ‰§è¡Œå¤æ‚çš„è¯Šæ–­ä»»åŠ¡ï¼Œå¦‚æ‰§è¡Œå™¨æµ‹è¯•ã€ä¼ æ„Ÿå™¨æ ¡å‡†ã€ç³»ç»Ÿè‡ªæ£€ç­‰ã€‚æ¯ä¸ªä¾‹ç¨‹éƒ½æœ‰å”¯ä¸€çš„IDï¼Œå¯ä»¥æ¥å—å‚æ•°å¹¶è¿”å›æ‰§è¡Œç»“æœã€‚"
            },
            0x34: {
                name: "è¯·æ±‚ä¸‹è½½",
                description: "å‘ECUä¸‹è½½æ•°æ®ï¼ˆé€šå¸¸ç”¨äºåˆ·å†™ï¼‰",
                category: "ä¸Šä¼ ä¸‹è½½",
                hasSubFunctions: false,
                details: [
                    "â€¢ 0x34 - è¯·æ±‚ä¸‹è½½",
                    "â€¢ 0x36 - ä¼ è¾“æ•°æ®",
                    "â€¢ 0x37 - é€€å‡ºä¼ è¾“"
                ],
                examples: [
                    "è¯·æ±‚ä¸‹è½½: 0x34 0x00 [åœ°å€] [é•¿åº¦]",
                    "ä¼ è¾“æ•°æ®: 0x36 0x00 [æ•°æ®å—]",
                    "é€€å‡ºä¼ è¾“: 0x37"
                ],
                useCase: "ECUå›ºä»¶æ›´æ–°å’Œé‡æ–°ç¼–ç¨‹",
                tip: "æ•°æ®ä¸‹è½½æ˜¯é«˜é£é™©æ“ä½œï¼Œéœ€ä¸¥æ ¼éµå¾ªåˆ·å†™æµç¨‹",
                knowledge: "è¯·æ±‚ä¸‹è½½æœåŠ¡æ˜¯ECUåˆ·å†™æµç¨‹çš„èµ·å§‹ç‚¹ï¼Œå»ºç«‹æ•°æ®ä¼ è¾“é€šé“ã€‚"
            },
            0x35: {
                name: "è¯·æ±‚ä¸Šä¼ ",
                description: "ä»ECUä¸Šä¼ æ•°æ®ï¼ˆé€šå¸¸ç”¨äºå¤‡ä»½ï¼‰",
                category: "ä¸Šä¼ ä¸‹è½½",
                hasSubFunctions: false,
                details: [
                    "â€¢ è¯·æ±‚ECUå†…å­˜æ•°æ®ä¸Šä¼ ",
                    "â€¢ å†…å­˜å¤‡ä»½åŠŸèƒ½",
                    "â€¢ æ•°æ®æ¢å¤æ“ä½œ"
                ],
                examples: [
                    "è¯·æ±‚ä¸Šä¼ : 0x35 0x00 [åœ°å€] [é•¿åº¦]",
                    "å“åº”: 0x75 0x00 [ç¡®è®¤]"
                ],
                useCase: "ECUæ•°æ®å¤‡ä»½å’Œæ¢å¤",
                tip: "ç”¨äºECUæ•°æ®çš„å¤‡ä»½å’Œæ¢å¤æ“ä½œ",
                knowledge: "è¯·æ±‚ä¸Šä¼ æœåŠ¡ç”¨äºä»ECUå¯¼å‡ºæ•°æ®ï¼Œæ”¯æŒæ•°æ®è¿ç§»å’Œå¤‡ä»½éœ€æ±‚ã€‚"
            },
            0x36: {
                name: "æ•°æ®ä¼ è¾“",
                description: "åœ¨ä¸‹è½½/ä¸Šä¼ è¿‡ç¨‹ä¸­ä¼ è¾“æ•°æ®",
                category: "ä¸Šä¼ ä¸‹è½½",
                hasSubFunctions: false,
                details: [
                    "â€¢ ä¸‹è½½è¿‡ç¨‹ä¸­çš„æ•°æ®ä¼ è¾“",
                    "â€¢ ä¸Šä¼ è¿‡ç¨‹ä¸­çš„æ•°æ®ä¼ è¾“",
                    "â€¢ åˆ†å—ä¼ è¾“æœºåˆ¶"
                ],
                examples: [
                    "ä¼ è¾“æ•°æ®: 0x36 0x01 [æ•°æ®å—]",
                    "å“åº”: 0x76 0x01 [ç¡®è®¤]"
                ],
                useCase: "åœ¨ä¸‹è½½æˆ–ä¸Šä¼ è¿‡ç¨‹ä¸­ä¼ è¾“å®é™…æ•°æ®",
                tip: "æ•°æ®ä¼ è¾“éœ€è¦ä¸è¯·æ±‚ä¸‹è½½/ä¸Šä¼ é…åˆä½¿ç”¨",
                knowledge: "æ•°æ®ä¼ è¾“æœåŠ¡è´Ÿè´£å®é™…çš„æ•°æ®å—ä¼ è¾“ï¼Œç¡®ä¿å¤§æ•°æ®é‡çš„å¯é ä¼ è¾“ã€‚"
            },
            0x37: {
                name: "è¯·æ±‚é€€å‡ºä¼ è¾“",
                description: "ç»“æŸä¸‹è½½æˆ–ä¸Šä¼ è¿‡ç¨‹",
                category: "ä¸Šä¼ ä¸‹è½½",
                hasSubFunctions: false,
                details: [
                    "â€¢ ç»“æŸæ•°æ®ä¼ è¾“ä¼šè¯",
                    "â€¢ å®Œæˆä¼ è¾“è¿‡ç¨‹",
                    "â€¢ èµ„æºæ¸…ç†"
                ],
                examples: [
                    "é€€å‡ºä¼ è¾“: 0x37",
                    "å“åº”: 0x77 [ç¡®è®¤]"
                ],
                useCase: "å®Œæˆæ•°æ®ä¼ è¾“åçš„æ¸…ç†æ“ä½œ",
                tip: "é€€å‡ºä¼ è¾“åECUæ¢å¤æ­£å¸¸æ“ä½œçŠ¶æ€",
                knowledge: "è¯·æ±‚é€€å‡ºä¼ è¾“æœåŠ¡æ ‡å¿—ç€æ•°æ®ä¼ è¾“è¿‡ç¨‹çš„ç»“æŸï¼Œé‡Šæ”¾ç›¸å…³èµ„æºã€‚"
            },
            0x38: {
                name: "è¯·æ±‚æ–‡ä»¶ä¼ è¾“",
                description: "æ‰§è¡Œæ–‡ä»¶çº§åˆ«çš„ä¼ è¾“æ“ä½œ",
                category: "ä¸Šä¼ ä¸‹è½½",
                hasSubFunctions: false,
                details: [
                    "â€¢ æ–‡ä»¶ä¼ è¾“æ“ä½œ",
                    "â€¢ æ”¯æŒé•¿æ•°æ®ä¼ è¾“",
                    "â€¢ æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥"
                ],
                examples: [
                    "è¯·æ±‚æ–‡ä»¶ä¼ è¾“: 0x38 [å‚æ•°]",
                    "å“åº”: 0x78 [ç¡®è®¤]"
                ],
                useCase: "æ‰§è¡Œé«˜çº§æ–‡ä»¶ä¼ è¾“æ“ä½œ",
                tip: "ç”¨äºå¤§æ–‡ä»¶æˆ–å¤æ‚æ•°æ®çš„ä¼ è¾“",
                knowledge: "è¯·æ±‚æ–‡ä»¶ä¼ è¾“æœåŠ¡æä¾›é«˜çº§æ–‡ä»¶æ“ä½œåŠŸèƒ½ï¼Œæ”¯æŒå¤æ‚çš„æ–‡ä»¶ç®¡ç†éœ€æ±‚ã€‚"
            }
        };

        // ======================
        // æµ‹è¯•é¢˜åº“
        // ======================
        const QUIZ_QUESTIONS = [
            {
                question: "UDSåè®®ä¸­ç”¨äºå»ºç«‹è¯Šæ–­ä¼šè¯çš„æœåŠ¡IDæ˜¯ä»€ä¹ˆï¼Ÿ",
                options: [
                    "A. 0x10 - è¯Šæ–­ä¼šè¯æ§åˆ¶æœåŠ¡",
                    "B. 0x11 - ECUé‡ç½®æœåŠ¡", 
                    "C. 0x27 - å®‰å…¨è®¿é—®æœåŠ¡",
                    "D. 0x22 - æ•°æ®è¯»å–æœåŠ¡"
                ],
                correct: 0,
                explanation: "0x10æ˜¯è¯Šæ–­ä¼šè¯æ§åˆ¶æœåŠ¡çš„æ ‡å‡†IDï¼Œç”¨äºå»ºç«‹å’Œç®¡ç†ä¸åŒçº§åˆ«çš„è¯Šæ–­ä¼šè¯"
            },
            {
                question: "ISO-TPåè®®çš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ",
                options: [
                    "A. å°†è¶…è¿‡8å­—èŠ‚çš„é•¿æ¶ˆæ¯åˆ†æ®µä¼ è¾“",
                    "B. æä¾›ç½‘ç»œå±‚åœ°å€è§£æ",
                    "C. å®ç°åº”ç”¨å±‚è¯Šæ–­æœåŠ¡", 
                    "D. ç®¡ç†ç”µæ°”ä¿¡å·ä¼ è¾“"
                ],
                correct: 0,
                explanation: "ISO-TPæ˜¯ISOä¼ è¾“åè®®ï¼Œå°†è¶…è¿‡CANæ€»çº¿8å­—èŠ‚é™åˆ¶çš„é•¿æ¶ˆæ¯åˆ†æ®µä¼ è¾“"
            },
            {
                question: "å®‰å…¨è®¿é—®æœåŠ¡(0x27)çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ",
                options: [
                    "A. ç§å­-å¯†é’¥è®¤è¯æœºåˆ¶",
                    "B. ç”¨æˆ·åå¯†ç è®¤è¯",
                    "C. æ•°å­—è¯ä¹¦è®¤è¯",
                    "D. ç”Ÿç‰©ç‰¹å¾è®¤è¯"
                ],
                correct: 0,
                explanation: "å®‰å…¨è®¿é—®æœåŠ¡é‡‡ç”¨ç§å­-å¯†é’¥æœºåˆ¶ï¼Œå®¢æˆ·ç«¯éœ€è®¡ç®—æ­£ç¡®å¯†é’¥æ‰èƒ½é€šè¿‡è®¤è¯"
            },
            {
                question: "é»˜è®¤ä¼šè¯(0x01)å’Œæ‰©å±•ä¼šè¯(0x03)æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ",
                options: [
                    "A. æ‰©å±•ä¼šè¯æƒé™æ›´é«˜ï¼Œå¯è®¿é—®æ›´å¤šåŠŸèƒ½",
                    "B. é»˜è®¤ä¼šè¯å“åº”æ›´å¿«",
                    "C. æ‰©å±•ä¼šè¯æ›´å®‰å…¨",
                    "D. æ²¡æœ‰å®è´¨åŒºåˆ«"
                ],
                correct: 0,
                explanation: "æ‰©å±•ä¼šè¯æ‹¥æœ‰æ›´é«˜æƒé™ï¼Œå¯è®¿é—®å®‰å…¨è®¿é—®ã€åˆ·å†™ç­‰é«˜çº§åŠŸèƒ½"
            },
            {
                question: "DTCä»£è¡¨ä»€ä¹ˆï¼Ÿ",
                options: [
                    "A. è¯Šæ–­æ•…éšœç ",
                    "B. æ•°æ®ä¼ è¾“æ§åˆ¶",
                    "C. è¯Šæ–­å·¥å…·è¿æ¥",
                    "D. è¯Šæ–­æµ‹è¯•å‘¨æœŸ"
                ],
                correct: 0,
                explanation: "DTC(Diagnostic Trouble Code)æ˜¯è¯Šæ–­æ•…éšœç ï¼Œç”¨äºæ ‡ç¤ºè½¦è¾†æ•…éšœ"
            },
            {
                question: "UDSåè®®éµå¾ªå“ªä¸ªå›½é™…æ ‡å‡†ï¼Ÿ",
                options: [
                    "A. ISO 14229",
                    "B. ISO 15765",
                    "C. ISO 11898",
                    "D. ISO 11519"
                ],
                correct: 0,
                explanation: "UDSåè®®éµå¾ªISO 14229å›½é™…æ ‡å‡†ï¼Œå®šä¹‰äº†ç»Ÿä¸€è¯Šæ–­æœåŠ¡"
            },
            {
                question: "ä»¥ä¸‹å“ªä¸ªæœåŠ¡ç”¨äºè¯»å–ECUçš„VINç ï¼Ÿ",
                options: [
                    "A. 0x22 F190 è¯»å–æ•°æ®æ ‡è¯†ç¬¦",
                    "B. 0x10 01 è¯Šæ–­ä¼šè¯æ§åˆ¶",
                    "C. 0x19 01 æ•…éšœç ç®¡ç†",
                    "D. 0x27 01 å®‰å…¨è®¿é—®"
                ],
                correct: 0,
                explanation: "ä½¿ç”¨0x22æœåŠ¡é…åˆDID 0xF190å¯è¯»å–è½¦è¾†è¯†åˆ«å·(VIN)"
            },
            {
                question: "ECUç¡¬é‡ç½®(0x11 0x01)å’Œè½¯é‡ç½®(0x11 0x02)çš„åŒºåˆ«ï¼Ÿ",
                options: [
                    "A. ç¡¬é‡ç½®ä¼šä¸¢å¤±æ˜“å¤±æ€§æ•°æ®ï¼Œè½¯é‡ç½®ä¿ç•™",
                    "B. ç¡¬é‡ç½®é€Ÿåº¦æ›´å¿«",
                    "C. è½¯é‡ç½®æ›´å®‰å…¨",
                    "D. æ²¡æœ‰åŒºåˆ«"
                ],
                correct: 0,
                explanation: "ç¡¬é‡ç½®ç›¸å½“äºå®Œå…¨æ–­ç”µå†ä¸Šç”µï¼Œè½¯é‡ç½®åªé‡ç½®å¤„ç†å™¨ï¼Œä¿ç•™RAMæ•°æ®"
            },
            {
                question: "ISO-TPåè®®èƒ½å¤Ÿå¤„ç†è¶…è¿‡å¤šå°‘å­—èŠ‚çš„è¯Šæ–­æ¶ˆæ¯ï¼Ÿ",
                options: [
                    "A. 8å­—èŠ‚",
                    "B. 16å­—èŠ‚",
                    "C. 32å­—èŠ‚",
                    "D. 64å­—èŠ‚"
                ],
                correct: 0,
                explanation: "CANæ€»çº¿æœ€å¤§å¸§é•¿åº¦ä¸º8å­—èŠ‚ï¼ŒISO-TPåè®®é€šè¿‡åˆ†æ®µä¼ è¾“å¤„ç†è¶…è¿‡8å­—èŠ‚çš„é•¿æ¶ˆæ¯"
            },
            {
                question: "DID 0xF190ä»£è¡¨ä»€ä¹ˆæ•°æ®ï¼Ÿ",
                options: [
                    "A. è½¦è¾†è¯†åˆ«å·(VIN)",
                    "B. è½¯ä»¶ç‰ˆæœ¬å·",
                    "C. ç¡¬ä»¶ç‰ˆæœ¬å·",
                    "D. ECUé›¶ä»¶å·"
                ],
                correct: 0,
                explanation: "DID 0xF190æ˜¯æ ‡å‡†å®šä¹‰çš„è½¦è¾†è¯†åˆ«å·(VIN)æ•°æ®æ ‡è¯†ç¬¦"
            },
            {
                question: "å®‰å…¨è®¿é—®æœåŠ¡(0x27)ä¸­çš„ç§å­-å¯†é’¥ç®—æ³•é€šå¸¸å¦‚ä½•å®ç°ï¼Ÿ",
                options: [
                    "A. ECUå†…éƒ¨ç®—æ³•å®ç°ï¼Œé€šå¸¸ä¸å¯é€†",
                    "B. å…¬å¼€ç®—æ³•ï¼Œä»»ä½•äººéƒ½å¯è®¡ç®—",
                    "C. å›ºå®šå¯†é’¥ï¼Œæ‰€æœ‰äººç›¸åŒ",
                    "D. æ— éœ€è®¡ç®—ï¼Œç›´æ¥å‘é€"
                ],
                correct: 0,
                explanation: "ç§å­-å¯†é’¥ç®—æ³•ç”±ECUå†…éƒ¨å®ç°ï¼Œé€šå¸¸ä¸ºå•å‘ä¸å¯é€†ç®—æ³•"
            },
            {
                question: "ä»¥ä¸‹å“ªä¸ªæœåŠ¡ç”¨äºæ¸…é™¤ECUä¸­çš„æ•…éšœç ï¼Ÿ",
                options: [
                    "A. 0x14 - æ¸…é™¤è¯Šæ–­ä¿¡æ¯",
                    "B. 0x19 - è¯»å–æ•…éšœç ä¿¡æ¯",
                    "C. 0x22 - è¯»å–æ•°æ®",
                    "D. 0x31 - ä¾‹ç¨‹æ§åˆ¶"
                ],
                correct: 0,
                explanation: "0x14æœåŠ¡ç”¨äºæ¸…é™¤ECUä¸­å­˜å‚¨çš„è¯Šæ–­æ•…éšœç (DTC)"
            }
        ];

        // ======================
        // DIDæŸ¥è¯¢æ•°æ®
        // ======================
        const UDS_DIDS = {
            0xF190: "è½¦è¾†è¯†åˆ«å· (VIN)",
            0xF191: "è½¦è¾†ç”Ÿäº§åºåˆ—å·",
            0xF192: "è½¯ä»¶ç‰ˆæœ¬å·",
            0xF193: "ç¡¬ä»¶ç‰ˆæœ¬å·",
            0xF194: "ECUåç§°",
            0xF195: "ODXæ–‡ä»¶æ ‡è¯†ç¬¦",
            0xF196: "ODXæ–‡ä»¶ç‰ˆæœ¬",
            0xF197: "è½¯ä»¶ç‰ˆæœ¬å·",
            0xF198: "è½¯ä»¶é›¶ä»¶å·",
            0xF199: "ECUé›¶ä»¶å·",
            0xF19A: "CIN (Calibration ID Number)",
            0xF19B: "CVN (Calibration Verification Number)",
            0xF19C: "ECUåˆ¶é€ å•†æ ‡è¯†",
            0xF19D: "ECUåˆ¶é€ æ—¥æœŸ",
            0xF19E: "è¯Šæ–­æ•°æ®æ ‡è¯†ç¬¦",
            0xF19F: "OEMç‰¹å®šæ•°æ®"
        };

        // ======================
        // ä¾‹ç¨‹IDæŸ¥è¯¢æ•°æ®
        // ======================
        const UDS_ROUTINES = {
            0xFF00: "ECUç¼–ç¨‹",
            0xFF01: "æ“¦é™¤å†…å­˜",
            0xFF02: "æ£€æŸ¥ç¼–ç¨‹ä¾èµ–",
            0x0202: "è¾“å…¥è¾“å‡ºæ§åˆ¶",
            0x0317: "æ¸…é™¤ä¸å¯ä¿¡DTC",
            0x0318: "è®¾ç½®DTCé•œåƒ",
            0x0319: "æ¸…é™¤DTCé•œåƒ"
        };

        // ======================
        // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
        // ======================
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.getElementById('themeToggle');
            
            if (body.hasAttribute('data-theme')) {
                body.removeAttribute('data-theme');
                themeToggle.textContent = 'ğŸŒ™ æ·±è‰²æ¨¡å¼';
                localStorage.setItem('theme', 'light');
                console.log('åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼');
            } else {
                body.setAttribute('data-theme', 'dark');
                themeToggle.textContent = 'â˜€ï¸ æµ…è‰²æ¨¡å¼';
                localStorage.setItem('theme', 'dark');
                console.log('åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼');
            }
        }

        // è¿”å›ä¸»é¡µ
        function goBack() {
            window.location.href = '../../index.html';
        }

        // ======================
        // é¡µé¢åŠ è½½æ—¶æ¢å¤ä¸»é¢˜
        // ======================
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const themeToggle = document.getElementById('themeToggle');
            
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
                themeToggle.textContent = 'â˜€ï¸ æµ…è‰²æ¨¡å¼';
            } else {
                document.body.removeAttribute('data-theme');
                themeToggle.textContent = 'ğŸŒ™ æ·±è‰²æ¨¡å¼';
            }
            
            // åˆå§‹åŒ–æœåŠ¡ç½‘æ ¼
            renderServices();
            
            // åˆå§‹åŒ–ç¬¬ä¸€ä¸ªé—®é¢˜
            loadQuizQuestion();
        });

        // ======================
        // æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
        // ======================
        function showTab(tabName) {
            try {
                // éšè—æ‰€æœ‰å†…å®¹åŒºåŸŸ
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.remove('active');
                    section.hidden = true;
                });

                // ç§»é™¤æ‰€æœ‰æ ‡ç­¾æŒ‰é’®çš„æ¿€æ´»çŠ¶æ€
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.classList.remove('active');
                    button.setAttribute('aria-selected', 'false');
                });

                // æ˜¾ç¤ºç›®æ ‡å†…å®¹åŒºåŸŸ
                const targetSection = document.getElementById(tabName + '-tab');
                if (targetSection) {
                    targetSection.classList.add('active');
                    targetSection.hidden = false;
                }

                // æ¿€æ´»å¯¹åº”æŒ‰é’®
                const tabButton = document.querySelector(`[data-tab="${tabName}"]`);
                if (tabButton) {
                    tabButton.classList.add('active');
                    tabButton.setAttribute('aria-selected', 'true');
                }

                // æ›´æ–°å½“å‰æ ‡ç­¾
                currentTab = tabName;
                
            } catch (error) {
                console.error('æ ‡ç­¾é¡µåˆ‡æ¢é”™è¯¯:', error);
                // é™é»˜å¤„ç†é”™è¯¯ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒ
            }
        }

        // ======================
        // æœåŠ¡ç½‘æ ¼æ¸²æŸ“
        // ======================
        function renderServices() {
            const container = document.getElementById('servicesGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Group services by category
            const servicesByCategory = {};
            Object.entries(UDS_SERVICES).forEach(([id, service]) => {
                if (!servicesByCategory[service.category]) {
                    servicesByCategory[service.category] = [];
                }
                servicesByCategory[service.category].push({id, service});
            });
            
            // Create detailed information for each category
            Object.entries(servicesByCategory).forEach(([category, services]) => {
                // Add category header
                const categorySection = document.createElement('div');
                categorySection.style.cssText = `
                    margin: var(--spacing-xl) 0;
                    padding: var(--spacing-lg);
                    background: var(--bg-card-light);
                    border-radius: var(--border-radius);
                    border: 1px solid var(--border-light);
                `;
                
                categorySection.innerHTML = `
                    <h3 style="color: var(--primary-gradient-start); margin-bottom: var(--spacing-md); padding-bottom: var(--spacing-xs); border-bottom: 2px solid var(--primary-gradient-start);">
                        ${category}
                    </h3>
                `;
                
                // Create grid for services in this category
                const servicesContainer = document.createElement('div');
                servicesContainer.style.cssText = `
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                    gap: var(--spacing-md);
                `;
                
                services.forEach(({id, service}) => {
                    const serviceCard = document.createElement('div');
                    serviceCard.style.cssText = `
                        padding: var(--spacing-md);
                        border: 1px solid var(--border-light);
                        border-radius: var(--border-radius);
                        background: var(--bg-light);
                        margin-bottom: var(--spacing-md);
                    `;
                    
                    let detailsHtml = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm);">
                            <h4 style="color: var(--primary-gradient-start); margin: 0; font-size: var(--font-size-lg);">
                                <span style="font-family: monospace; background: rgba(102, 126, 234, 0.1); padding: 2px 6px; border-radius: 4px; margin-right: var(--spacing-xs);">0x${parseInt(id).toString(16).toUpperCase()}</span>
                                ${service.name}
                            </h4>
                            <span style="font-size: var(--font-size-sm); ${service.hasSubFunctions ? 'color: #4CAF50;' : 'color: #f44336;'} font-weight: var(--font-weight-bold);">
                                ${service.hasSubFunctions ? 'æ”¯æŒå­åŠŸèƒ½' : 'æ— å­åŠŸèƒ½'}
                            </span>
                        </div>
                        <p style="color: var(--text-light-secondary); margin: var(--spacing-xs) 0; font-size: var(--font-size-sm);">
                            ${service.description}
                        </p>
                        <div style="margin: var(--spacing-sm) 0;">
                            <div style="font-weight: var(--font-weight-bold); color: var(--primary-gradient-start); margin-bottom: var(--spacing-xs);">åŠŸèƒ½è¯¦æƒ…:</div>
                            <ul style="margin: 0 0 0 var(--spacing-lg); padding: 0; font-size: var(--font-size-sm);">
                    `;
                    
                    service.details.forEach(detail => {
                        detailsHtml += `<li style="margin-bottom: var(--spacing-xs);">${detail}</li>`;
                    });
                    
                    detailsHtml += `
                            </ul>
                        </div>
                        <div style="margin: var(--spacing-sm) 0;">
                            <div style="font-weight: var(--font-weight-bold); color: var(--primary-gradient-start); margin-bottom: var(--spacing-xs);">ç¤ºä¾‹:</div>
                            <ul style="margin: 0 0 0 var(--spacing-lg); padding: 0; font-size: var(--font-size-xs); color: #666;">
                    `;
                    
                    service.examples.forEach(example => {
                        detailsHtml += `<li style="margin-bottom: var(--spacing-xs);">${example}</li>`;
                    });
                    
                    detailsHtml += `
                            </ul>
                        </div>
                    `;
                    
                    // Add professional knowledge if available
                    if (service.knowledge) {
                        detailsHtml += `
                            <div style="margin: var(--spacing-sm) 0; padding: var(--spacing-sm); background: rgba(102, 126, 234, 0.05); border-radius: var(--border-radius);">
                                <div style="font-weight: var(--font-weight-bold); color: #5b21b6; margin-bottom: var(--spacing-xs);">ä¸“ä¸šçŸ¥è¯†:</div>
                                <p style="margin: 0; font-size: var(--font-size-sm); color: var(--text-light-secondary);">${service.knowledge}</p>
                            </div>
                        `;
                    }
                    
                    detailsHtml += `
                        <div style="margin-top: var(--spacing-sm);">
                            <button onclick="showServiceInfo('0x${parseInt(id).toString(16).toUpperCase()}')" 
                                style="background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end)); 
                                       color: white; border: none; padding: var(--spacing-xs) var(--spacing-sm); 
                                       border-radius: var(--border-radius); cursor: pointer; font-size: var(--font-size-sm);">
                                è¯¦ç»†äº†è§£
                            </button>
                        </div>
                    `;
                    
                    serviceCard.innerHTML = detailsHtml;
                    servicesContainer.appendChild(serviceCard);
                });
                
                categorySection.appendChild(servicesContainer);
                container.appendChild(categorySection);
            });
        }

        // ======================
        // æœåŠ¡è¯¦æƒ…æ˜¾ç¤º
        // ======================
        function showServiceInfo(serviceId) {
            // æ ‡å‡†åŒ–serviceIdæ ¼å¼
            let normalizedId = serviceId.toString().toLowerCase();
            if (!normalizedId.startsWith('0x')) {
                // å¦‚æœä¸æ˜¯0xå¼€å¤´ï¼Œéœ€è¦è½¬æ¢
                if (/^[0-9A-Fa-f]+$/.test(normalizedId)) {
                    normalizedId = '0x' + normalizedId;
                }
            }
            
            const service = UDS_SERVICES[parseInt(normalizedId, 16)];
            if (!service) {
                createModal('æœåŠ¡ä¿¡æ¯', 'æœªæ‰¾åˆ°æœåŠ¡ä¿¡æ¯: ' + serviceId);
                return;
            }
            
            // Build detailed content including knowledge section if available
            let details = `${service.name} (0x${parseInt(normalizedId, 16).toString(16).toUpperCase()})\n\n`;
            details += `åˆ†ç±»: ${service.category}\n\n`;
            details += `${service.description}\n\n`;
            details += `å­åŠŸèƒ½æ”¯æŒ: ${service.hasSubFunctions ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ'}\n\n`;
            details += `è¯¦ç»†ä¿¡æ¯:\n${service.details.join('\n')}\n\n`;
            details += `ç¤ºä¾‹:\n${service.examples.join('\n')}\n\n`;
            details += `åº”ç”¨åœºæ™¯:\n${service.useCase}\n\n`;
            if (service.knowledge) {
                details += `ä¸“ä¸šçŸ¥è¯†:\n${service.knowledge}\n\n`;
            }
            details += `æç¤º:\n${service.tip}`;
            
            // åˆ›å»ºæ¨¡æ€æ¡†æ˜¾ç¤ºæœåŠ¡è¯¦æƒ…
            createModal(`${service.name} (0x${parseInt(normalizedId, 16).toString(16).toUpperCase()})`, details);
        }

        // ======================
        // æ¨¡æ€æ¡†åŠŸèƒ½
        // ======================
        function createModal(title, content) {
            // ç§»é™¤å·²å­˜åœ¨çš„æ¨¡æ€æ¡†
            const existingModal = document.querySelector('.modal-overlay');
            if (existingModal) {
                existingModal.remove();
            }
            
            // åˆ†æå†…å®¹å¹¶æ ¼å¼åŒ–
            const lines = content.split('\n');
            let formattedContent = '<div class="modal-content-formatted">';
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                if (line.startsWith('åˆ†ç±»:')) {
                    formattedContent += `<div class="modal-field"><strong>åˆ†ç±»:</strong> <span class="field-value">${line.substring(4).trim()}</span></div>`;
                } else if (line.startsWith('å­åŠŸèƒ½æ”¯æŒ:')) {
                    const value = line.substring(6).trim();
                    const colorClass = value === 'æ”¯æŒ' ? 'value-yes' : 'value-no';
                    formattedContent += `<div class="modal-field"><strong>å­åŠŸèƒ½æ”¯æŒ:</strong> <span class="field-value ${colorClass}">${value}</span></div>`;
                } else if (line.startsWith('è¯¦ç»†ä¿¡æ¯:')) {
                    formattedContent += `<h4 class="modal-section-title">è¯¦ç»†ä¿¡æ¯</h4><ul class="modal-list">`;
                } else if (line.startsWith('â€¢')) {
                    formattedContent += `<li class="modal-list-item">${line.substring(2).trim()}</li>`;
                } else if (line.startsWith('ç¤ºä¾‹:')) {
                    formattedContent += `</ul><h4 class="modal-section-title">ç¤ºä¾‹</h4><ul class="modal-list">`;
                } else if (line.startsWith('åº”ç”¨åœºæ™¯:')) {
                    formattedContent += `</ul><h4 class="modal-section-title">åº”ç”¨åœºæ™¯</h4><p class="modal-paragraph">${line.substring(6).trim()}</p>`;
                } else if (line.startsWith('æç¤º:')) {
                    formattedContent += `<h4 class="modal-section-title">æç¤º</h4><p class="modal-paragraph">${line.substring(3).trim()}</p>`;
                } else if (line.startsWith('ä¸“ä¸šçŸ¥è¯†:')) {
                    formattedContent += `<h4 class="modal-section-title">ä¸“ä¸šçŸ¥è¯†</h4><p class="modal-paragraph">${line.substring(6).trim()}</p>`;
                } else if (line.includes('(') && line.includes(')') && !line.startsWith('åˆ†ç±»:') && !line.startsWith('å­åŠŸèƒ½æ”¯æŒ:') && !line.startsWith('åº”ç”¨åœºæ™¯:') && !line.startsWith('æç¤º:') && !line.startsWith('ä¸“ä¸šçŸ¥è¯†:')) {
                    // Handle service name with SID
                    const namePart = line.substring(0, line.indexOf('(')).trim();
                    const sidPart = line.substring(line.indexOf('('), line.indexOf(')') + 1).trim();
                    formattedContent += `<h3 class="modal-service-title">${namePart} <span class="modal-sid">${sidPart}</span></h3>`;
                } else if (line) {
                    // Regular content
                    if (i === 0) { // First line might be the title
                        formattedContent += `<h3 class="modal-service-title">${line}</h3>`;
                    } else {
                        formattedContent += `<p class="modal-paragraph">${line}</p>`;
                    }
                }
            }
            
            formattedContent += '</div>';
            
            // åˆ›å»ºæ¨¡æ€æ¡†ç»“æ„
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
                    <div class="modal-header">
                        <h3 id="modalTitle">${title}</h3>
                        <button class="modal-close" onclick="closeModal()" aria-label="å…³é—­" title="å…³é—­">Ã—</button>
                    </div>
                    <div class="modal-body">
                        ${formattedContent}
                    </div>
                    <div class="modal-footer">
                        <button class="demo-button" onclick="closeModal()">å…³é—­</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­æ¨¡æ€æ¡†
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Escé”®å…³é—­æ¨¡æ€æ¡†
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
        }

        // Function to remove the modal styles when modal is closed
        function closeModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                modal.remove();
            }
        }

        // ======================
        // äº¤äº’æ¼”ç¤ºåŠŸèƒ½
        // ======================
        function startDemo(type) {
            if (demoActive) return;
            
            demoActive = true;
            const clientStatus = document.getElementById('clientStatus');
            const serverStatus = document.getElementById('serverStatus');
            const log = document.getElementById('communicationLog');
            
            // æ¸…ç©ºæ—¥å¿—
            log.innerHTML = '';
            addLogMessage('ğŸ’¡ å¼€å§‹' + getDemoName(type) + 'æ¼”ç¤º...', 'info');
            
            // é‡ç½®è®¾å¤‡çŠ¶æ€
            if (clientStatus) clientStatus.textContent = 'å‡†å¤‡ä¸­...';
            if (serverStatus) serverStatus.textContent = 'ç­‰å¾…ä¸­...';
            
            // æ‰§è¡Œæ¼”ç¤º
            executeDemoSequence(type);
        }

        function getDemoName(type) {
            const names = {
                'session': 'è¯Šæ–­ä¼šè¯',
                'security': 'å®‰å…¨è®¿é—®', 
                'read': 'æ•°æ®è¯»å–',
                'dtc': 'æ•…éšœç '
            };
            return names[type] || 'æœªçŸ¥';
        }

        function executeDemoSequence(type) {
            const sequences = {
                'session': [
                    { delay: 0, client: 'å‘é€ä¼šè¯è¯·æ±‚', server: 'å¤„ç†ä¸­...', message: 'ğŸ“¤ [è¯Šæ–­å·¥å…·] â†’ 0x10 0x03 (è¯·æ±‚æ‰©å±•ä¼šè¯)' },
                    { delay: 1500, client: 'ç­‰å¾…å“åº”', server: 'å¤„ç†å®Œæˆ', message: 'ğŸ“¥ [è½¦è¾†ECU] â†’ 0x50 0x03 (æ‰©å±•ä¼šè¯å·²å»ºç«‹)' },
                    { delay: 3000, client: 'ä¼šè¯å°±ç»ª', server: 'å°±ç»ª', message: 'âœ… [ç³»ç»Ÿ] â†’ è¯Šæ–­ä¼šè¯å»ºç«‹æˆåŠŸ' }
                ],
                'security': [
                    { delay: 0, client: 'è¯·æ±‚ç§å­', server: 'ç”Ÿæˆç§å­', message: 'ğŸ“¤ [è¯Šæ–­å·¥å…·] â†’ 0x27 0x01 (è¯·æ±‚ç§å­)' },
                    { delay: 2000, client: 'è®¡ç®—å¯†é’¥', server: 'ç­‰å¾…éªŒè¯', message: 'ğŸ“¥ [è½¦è¾†ECU] â†’ 0x67 0x01 [éšæœºç§å­] (è¿”å›ç§å­)' },
                    { delay: 4000, client: 'å‘é€å¯†é’¥', server: 'éªŒè¯ä¸­...', message: 'ğŸ“¤ [è¯Šæ–­å·¥å…·] â†’ 0x27 0x02 [è®¡ç®—å¯†é’¥] (å‘é€å¯†é’¥)' },
                    { delay: 5500, client: 'è®¤è¯æˆåŠŸ', server: 'å·²æˆæƒ', message: 'âœ… [ç³»ç»Ÿ] â†’ å®‰å…¨è®¿é—®å·²æˆæƒ' }
                ],
                'read': [
                    { delay: 0, client: 'è¯»å–è¯·æ±‚', server: 'æŸ¥æ‰¾æ•°æ®', message: 'ğŸ“¤ [è¯Šæ–­å·¥å…·] â†’ 0x22 0xF1 0x90 (è¯»å–VIN)' },
                    { delay: 1500, client: 'æ¥æ”¶æ•°æ®', server: 'å‘é€æ•°æ®', message: 'ğŸ“¥ [è½¦è¾†ECU] â†’ 0x62 0xF1 0x90 [æ•°æ®] (è¿”å›VIN)' },
                    { delay: 3000, client: 'è§£æå®Œæˆ', server: 'å®Œæˆ', message: 'âœ… [ç³»ç»Ÿ] â†’ æ•°æ®è¯»å–å®Œæˆ' }
                ],
                'dtc': [
                    { delay: 0, client: 'DTCè¯·æ±‚', server: 'æ£€æŸ¥æ•…éšœ', message: 'ğŸ“¤ [è¯Šæ–­å·¥å…·] â†’ 0x19 0x02 (è¯»å–DTC)' },
                    { delay: 1500, client: 'æ¥æ”¶æ•…éšœç ', server: 'å‘é€DTC', message: 'ğŸ“¥ [è½¦è¾†ECU] â†’ 0x59 0x02 [DTC] (è¿”å›æ•…éšœç )' },
                    { delay: 3000, client: 'åˆ†æå®Œæˆ', server: 'å®Œæˆ', message: 'âš ï¸ [ç³»ç»Ÿ] â†’ æ•…éšœç è¯»å–å®Œæˆ' }
                ]
            };
            
            const sequence = sequences[type];
            if (!sequence) {
                addLogMessage('âŒ æœªçŸ¥æ¼”ç¤ºç±»å‹', 'error');
                demoActive = false;
                return;
            }
            
            sequence.forEach(step => {
                setTimeout(() => {
                    const clientStatus = document.getElementById('clientStatus');
                    const serverStatus = document.getElementById('serverStatus');
                    
                    if (clientStatus) clientStatus.textContent = step.client;
                    if (serverStatus) serverStatus.textContent = step.server;
                    
                    addLogMessage(step.message, 'info');
                    
                    // æ·»åŠ åŠ¨ç”»æ•ˆæœ - åœ¨åè®®æ ˆä¸­é«˜äº®å¯¹åº”çš„å±‚
                    animateProtocolLayers(type, step);
                }, step.delay);
            });
            
            // æ¼”ç¤ºå®Œæˆ
            setTimeout(() => {
                demoActive = false;
                addLogMessage(`ğŸ ${getDemoName(type)}æ¼”ç¤ºå®Œæˆ`, 'info');
            }, sequence[sequence.length - 1].delay + 1500);
        }

        // ======================
        // åè®®æ ˆå±‚åŠ¨ç”»åŠŸèƒ½
        // ======================
        function animateProtocolLayers(demoType, step) {
            // æ ¹æ®æ¼”ç¤ºç±»å‹å’Œæ­¥éª¤ç¡®å®šè¦é«˜äº®çš„åè®®å±‚
            const layerMappings = {
                'session': ['application', 'session'],
                'security': ['application', 'session', 'transport'],
                'read': ['application', 'session', 'transport', 'network'],
                'dtc': ['application', 'session', 'transport', 'network', 'datalink']
            };
            
            const layersToAnimate = layerMappings[demoType] || ['application'];
            
            // é«˜äº®å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åè®®æ ˆä¸­çš„å¯¹åº”å±‚
            layersToAnimate.forEach(layer => {
                // å®¢æˆ·ç«¯åè®®æ ˆ
                const clientLayer = document.querySelector('#clientProtocolStack .protocol-layer.' + layer);
                if (clientLayer) {
                    clientLayer.classList.add('active');
                    setTimeout(() => {
                        clientLayer.classList.remove('active');
                    }, 800);
                }
                
                // æœåŠ¡å™¨åè®®æ ˆ
                const serverLayer = document.querySelector('#serverProtocolStack .protocol-layer.' + layer);
                if (serverLayer) {
                    serverLayer.classList.add('active');
                    setTimeout(() => {
                        serverLayer.classList.remove('active');
                    }, 800);
                }
            });
            
            // æ·»åŠ è¿æ¥çº¿åŠ¨ç”»æ•ˆæœ
            const connectionLine = document.getElementById('connectionLine');
            if (connectionLine) {
                connectionLine.style.animation = 'pulse 1s infinite';
                setTimeout(() => {
                    connectionLine.style.animation = '';
                }, 1000);
            }
        }

        // ======================
        // åè®®æ ˆæµæ¼”ç¤ºåŠŸèƒ½
        // ======================
        function animateProtocolFlow() {
            addLogMessage('ğŸ”„ å¼€å§‹åè®®æ ˆæµæ¼”ç¤º...', 'info');
            
            // æŒ‰é¡ºåºæ¿€æ´»åè®®æ ˆä¸­çš„æ¯ä¸€å±‚
            const layers = ['application', 'session', 'transport', 'network', 'datalink'];
            layers.forEach((layer, index) => {
                setTimeout(() => {
                    // æ¿€æ´»å®¢æˆ·ç«¯åè®®æ ˆä¸­çš„å±‚
                    const clientLayer = document.querySelector('#clientProtocolStack .protocol-layer.' + layer);
                    if (clientLayer) {
                        clientLayer.classList.add('active');
                        setTimeout(() => {
                            clientLayer.classList.remove('active');
                        }, 1000);
                    }
                    
                    // æ¿€æ´»æœåŠ¡å™¨åè®®æ ˆä¸­çš„å±‚
                    const serverLayer = document.querySelector('#serverProtocolStack .protocol-layer.' + layer);
                    if (serverLayer) {
                        serverLayer.classList.add('active');
                        setTimeout(() => {
                            serverLayer.classList.remove('active');
                        }, 1000);
                    }
                    
                    // æ·»åŠ æ—¥å¿—æ¡ç›®
                    const layerNames = {
                        'application': 'åº”ç”¨å±‚',
                        'session': 'ä¼šè¯å±‚',
                        'transport': 'ä¼ è¾“å±‚',
                        'network': 'ç½‘ç»œå±‚',
                        'datalink': 'æ•°æ®é“¾è·¯å±‚'
                    };
                    
                    addLogMessage(`ğŸ“¤ ${layerNames[layer]}: åè®®å¤„ç†`, 'info');
                }, index * 600);
            });
            
            setTimeout(() => {
                addLogMessage('âœ… åè®®æ ˆæµæ¼”ç¤ºå®Œæˆ', 'info');
            }, layers.length * 600 + 1000);
        }

        // ======================
        // æ¶ˆæ¯æµå‘æ¼”ç¤ºåŠŸèƒ½
        // ======================
        function showProtocolMessageFlow() {
            addLogMessage('ğŸ”„ å¼€å§‹æ¶ˆæ¯æµå‘æ¼”ç¤º...', 'info');
            
            // æ¨¡æ‹Ÿæ¶ˆæ¯åœ¨åè®®æ ˆä¸­çš„æµå‘
            const messageFlow = [
                { layer: 'application', action: 'åˆ›å»ºUDSè¯·æ±‚' },
                { layer: 'session', action: 'ä¼šè¯ç®¡ç†å¤„ç†' },
                { layer: 'transport', action: 'åˆ†æ®µå°è£…' },
                { layer: 'network', action: 'è·¯ç”±å¯»å€' },
                { layer: 'datalink', action: 'CANå¸§å‘é€' },
                { layer: 'physical', action: 'ç‰©ç†ä¼ è¾“' }
            ];
            
            messageFlow.forEach((flow, index) => {
                setTimeout(() => {
                    // é«˜äº®ç›¸åº”çš„åè®®å±‚
                    const clientLayer = document.querySelector(`#clientProtocolStack .protocol-layer.${flow.layer}`);
                    const serverLayer = document.querySelector(`#serverProtocolStack .protocol-layer.${flow.layer}`);
                    
                    if (clientLayer) {
                        clientLayer.classList.add('active');
                        setTimeout(() => {
                            clientLayer.classList.remove('active');
                        }, 800);
                    }
                    
                    if (serverLayer) {
                        serverLayer.classList.add('active');
                        setTimeout(() => {
                            serverLayer.classList.remove('active');
                        }, 800);
                    }
                    
                    // æ·»åŠ æ—¥å¿—æ¡ç›®
                    addLogMessage(`ğŸ“¤ ${flow.layer}: ${flow.action}`, 'info');
                }, index * 700);
            });
            
            setTimeout(() => {
                addLogMessage('âœ… æ¶ˆæ¯æµå‘æ¼”ç¤ºå®Œæˆ', 'info');
            }, messageFlow.length * 700 + 1000);
        }

        // ======================
        // è¯·æ±‚-å“åº”æµç¨‹æ¼”ç¤ºåŠŸèƒ½
        // ======================
        function showRequestResponseFlow() {
            addLogMessage('ğŸ”„ å¼€å§‹è¯·æ±‚-å“åº”æµç¨‹æ¼”ç¤º...', 'info');
            
            // æ¨¡æ‹Ÿå®Œæ•´çš„è¯·æ±‚-å“åº”æµç¨‹
            const requestFlow = [
                { direction: 'request', layer: 'application', action: 'è¯Šæ–­å·¥å…·: åˆ›å»º 0x10 0x03 è¯·æ±‚' },
                { direction: 'request', layer: 'session', action: 'ä¼šè¯å±‚: ä¼šè¯ç®¡ç†å¤„ç†' },
                { direction: 'request', layer: 'transport', action: 'ä¼ è¾“å±‚: æ¶ˆæ¯åˆ†æ®µå°è£…' },
                { direction: 'request', layer: 'network', action: 'ç½‘ç»œå±‚: è·¯ç”±å¯»å€' },
                { direction: 'request', layer: 'datalink', action: 'æ•°æ®é“¾è·¯å±‚: CANå¸§å‘é€' },
                { direction: 'request', layer: 'physical', action: 'ç‰©ç†å±‚: æ¶ˆæ¯åˆ°è¾¾ECU' }
            ];
            
            const responseFlow = [
                { direction: 'response', layer: 'physical', action: 'ECUç‰©ç†å±‚: æ¥æ”¶CANå¸§' },
                { direction: 'response', layer: 'datalink', action: 'ECUæ•°æ®é“¾è·¯å±‚: å¸§å¤„ç†' },
                { direction: 'response', layer: 'network', action: 'ECUç½‘ç»œå±‚: è·¯ç”±è½¬å‘' },
                { direction: 'response', layer: 'transport', action: 'ECUä¼ è¾“å±‚: æ¶ˆæ¯é‡ç»„' },
                { direction: 'response', layer: 'session', action: 'ECUä¼šè¯å±‚: ä¼šè¯çŠ¶æ€æ›´æ–°' },
                { direction: 'response', layer: 'application', action: 'ECUåº”ç”¨å±‚: å¤„ç†0x10æœåŠ¡ï¼Œè¿”å›0x50 0x03' },
                { direction: 'response', layer: 'transport', action: 'ECUä¼ è¾“å±‚: å“åº”æ¶ˆæ¯å°è£…' },
                { direction: 'response', layer: 'network', action: 'ECUç½‘ç»œå±‚: è·¯ç”±å“åº”' },
                { direction: 'response', layer: 'datalink', action: 'ECUæ•°æ®é“¾è·¯å±‚: å‘é€å“åº”å¸§' },
                { direction: 'response', layer: 'physical', action: 'ECUç‰©ç†å±‚: å“åº”æ¶ˆæ¯è¿”å›è¯Šæ–­å·¥å…·' },
                { direction: 'response', layer: 'datalink', action: 'è¯Šæ–­å·¥å…·æ•°æ®é“¾è·¯å±‚: æ¥æ”¶å“åº”' },
                { direction: 'response', layer: 'network', action: 'è¯Šæ–­å·¥å…·ç½‘ç»œå±‚: å¤„ç†å“åº”' },
                { direction: 'response', layer: 'transport', action: 'è¯Šæ–­å·¥å…·ä¼ è¾“å±‚: å“åº”é‡ç»„' },
                { direction: 'response', layer: 'application', action: 'è¯Šæ–­å·¥å…·åº”ç”¨å±‚: æ¥æ”¶ç¡®è®¤ï¼Œä¼šè¯å»ºç«‹å®Œæˆ' }
            ];
            
            // æ‰§è¡Œè¯·æ±‚æµç¨‹
            requestFlow.forEach((flow, index) => {
                setTimeout(() => {
                    // é«˜äº®ç›¸åº”çš„åè®®å±‚
                    const clientLayer = document.querySelector(`#clientProtocolStack .protocol-layer.${flow.layer}`);
                    const serverLayer = document.querySelector(`#serverProtocolStack .protocol-layer.${flow.layer}`);
                    
                    if (clientLayer) {
                        clientLayer.classList.add('active');
                        setTimeout(() => {
                            clientLayer.classList.remove('active');
                        }, 800);
                    }
                    
                    if (serverLayer) {
                        serverLayer.classList.add('active');
                        setTimeout(() => {
                            serverLayer.classList.remove('active');
                        }, 800);
                    }
                    
                    // æ·»åŠ æ—¥å¿—æ¡ç›®
                    const arrow = flow.direction === 'request' ? 'â¡ï¸' : 'â¬…ï¸';
                    addLogMessage(`${arrow} ${flow.layer}: ${flow.action}`, 'info');
                }, index * 600);
            });
            
            // æ‰§è¡Œå“åº”æµç¨‹
            responseFlow.forEach((flow, index) => {
                setTimeout(() => {
                    // é«˜äº®ç›¸åº”çš„åè®®å±‚
                    const clientLayer = document.querySelector(`#clientProtocolStack .protocol-layer.${flow.layer}`);
                    const serverLayer = document.querySelector(`#serverProtocolStack .protocol-layer.${flow.layer}`);
                    
                    if (clientLayer) {
                        clientLayer.classList.add('active');
                        setTimeout(() => {
                            clientLayer.classList.remove('active');
                        }, 800);
                    }
                    
                    if (serverLayer) {
                        serverLayer.classList.add('active');
                        setTimeout(() => {
                            serverLayer.classList.remove('active');
                        }, 800);
                    }
                    
                    // æ·»åŠ æ—¥å¿—æ¡ç›®
                    const arrow = flow.direction === 'request' ? 'â¡ï¸' : 'â¬…ï¸';
                    addLogMessage(`${arrow} ${flow.layer}: ${flow.action}`, 'info');
                }, (requestFlow.length * 600) + (index * 600));
            });
            
            setTimeout(() => {
                addLogMessage('âœ… è¯·æ±‚-å“åº”æµç¨‹æ¼”ç¤ºå®Œæˆ', 'info');
            }, (requestFlow.length + responseFlow.length) * 600 + 1000);
        }

        function addLogMessage(message, type = 'info') {
            const log = document.getElementById('communicationLog');
            if (!log) return;
            
            // Limit log entries to prevent DOM bloat
            if (log.children.length > 50) {
                log.removeChild(log.firstChild);
            }
            
            const timestamp = new Date().toTimeString().substring(0, 8);
            const entry = document.createElement('div');
            entry.className = `log-entry`;
            entry.innerHTML = `
                <span class="log-timestamp">[${timestamp}]</span>
                <span class="log-${type}">${message}</span>
            `;
            
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight; // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
        }

        function pulseDevice(deviceId) {
            const device = document.getElementById(deviceId);
            if (device) {
                device.classList.add('pulse');
                setTimeout(() => {
                    device.classList.remove('pulse');
                }, 1000);
            }
        }

        function resetDemo() {
            const clientStatus = document.getElementById('clientStatus');
            const serverStatus = document.getElementById('serverStatus');
            const log = document.getElementById('communicationLog');
            
            if (clientStatus) clientStatus.textContent = 'å°±ç»ª';
            if (serverStatus) serverStatus.textContent = 'å¾…æœº';
            
            if (log) {
                log.innerHTML = `
                    <div class="log-entry">
                        <span class="log-timestamp">[12:00:00]</span>
                        <span class="log-info">ğŸ’¡ ç³»ç»Ÿå°±ç»ªï¼Œç­‰å¾…æ“ä½œ...</span>
                    </div>
                    <div class="log-entry">
                        <span class="log-timestamp">[12:00:00]</span>
                        <span class="log-info">ğŸ—£ï¸ ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹å®æ—¶æ¼”ç¤º</span>
                    </div>
                `;
            }
            
            demoActive = false;
        }

        // ======================
        // çŸ¥è¯†æµ‹è¯•åŠŸèƒ½
        // ======================
        function loadQuizQuestion() {
            if (quizState.currentQuestion >= QUIZ_QUESTIONS.length) {
                showQuizResults();
                return;
            }
            
            const question = QUIZ_QUESTIONS[quizState.currentQuestion];
            const questionArea = document.getElementById('questionArea');
            
            if (!questionArea) return;
            
            let optionsHtml = '';
            question.options.forEach((option, index) => {
                optionsHtml += `
                    <div class="quiz-option" onclick="selectAnswer(${index})" role="button" tabindex="0" 
                         aria-label="${option}">
                        <strong>${option}</strong>
                    </div>
                `;
            });
            
            questionArea.innerHTML = `
                <div class="quiz-question">
                    <h3 class="quiz-title">ç¬¬${quizState.currentQuestion + 1}é¢˜: ${question.question}</h3>
                    <div class="quiz-options">
                        ${optionsHtml}
                    </div>
                </div>
                <div style="margin-top: var(--spacing-xl); text-align: center; color: var(--text-light-secondary);">
                    ${quizState.currentQuestion + 1} / ${QUIZ_QUESTIONS.length}
                </div>
            `;
            
            quizState.answered = false;
        }

        function selectAnswer(selectedIndex) {
            if (quizState.answered) return;
            
            const question = QUIZ_QUESTIONS[quizState.currentQuestion];
            const options = document.querySelectorAll('.quiz-option');
            
            // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
            options.forEach(option => {
                option.classList.add('disabled');
            });
            
            quizState.answered = true;
            
            // æ ‡è®°æ­£ç¡®å’Œé”™è¯¯ç­”æ¡ˆ
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && selectedIndex !== question.correct) {
                    option.classList.add('wrong');
                }
            });
            
            // æ›´æ–°åˆ†æ•°
            if (selectedIndex === question.correct) {
                quizState.score++;
                addLogMessage(`âœ… æ­£ç¡®ï¼${question.explanation}`, 'info');
            } else {
                addLogMessage(`âŒ é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯: ${question.options[question.correct]}. ${question.explanation}`, 'error');
            }
            
            // ç­‰å¾…ä¸€æ®µæ—¶é—´ååŠ è½½ä¸‹ä¸€é¢˜
            setTimeout(() => {
                quizState.currentQuestion++;
                loadQuizQuestion();
            }, 1500);
        }

        function showQuizResults() {
            const resultsDiv = document.getElementById('quizResults');
            const scoreValue = document.getElementById('scoreValue');
            const totalQuestions = document.getElementById('totalQuestions');
            const percentage = document.getElementById('percentage');
            
            if (!resultsDiv || !scoreValue || !totalQuestions || !percentage) return;
            
            const percent = Math.round((quizState.score / QUIZ_QUESTIONS.length) * 100);
            
            scoreValue.textContent = quizState.score;
            totalQuestions.textContent = QUIZ_QUESTIONS.length;
            percentage.textContent = percent;
            
            // æ ¹æ®æˆç»©æ˜¾ç¤ºä¸åŒåé¦ˆ
            let feedback = '';
            if (percent >= 80) {
                feedback = 'ä¼˜ç§€ï¼ä½ å¯¹UDSåè®®æœ‰æ·±å…¥çš„ç†è§£ï¼';
            } else if (percent >= 60) {
                feedback = 'ä¸é”™ï¼ç»§ç»­å­¦ä¹ å¯ä»¥æŒæ¡æ›´å¤šUDSçŸ¥è¯†ã€‚';
            } else {
                feedback = 'éœ€è¦åŠ å¼ºå­¦ä¹ ï¼Œå¤šç»ƒä¹ æœ‰åŠ©äºç†è§£UDSåè®®ã€‚';
            }
            
            // åœ¨ç»“æœæ¡†ä¸­æ·»åŠ åé¦ˆ
            const resultsBox = document.querySelector('#quizResults .results-box');
            if (resultsBox) {
                resultsBox.innerHTML += `<div style="margin-top: var(--spacing-md);">${feedback}</div>`;
            }
            
            // éšè—é—®é¢˜åŒºåŸŸï¼Œæ˜¾ç¤ºç»“æœåŒºåŸŸ
            document.getElementById('questionArea').style.display = 'none';
            resultsDiv.style.display = 'block';
            
            // ä¿å­˜ç»“æœåˆ°æœ¬åœ°å­˜å‚¨
            const quizResult = {
                score: quizState.score,
                total: QUIZ_QUESTIONS.length,
                percentage: percent,
                date: new Date().toISOString()
            };
            localStorage.setItem('quiz_result', JSON.stringify(quizResult));
        }

        function restartQuiz() {
            quizState = {
                currentQuestion: 0,
                score: 0,
                answered: false
            };
            
            document.getElementById('quizResults').style.display = 'none';
            document.getElementById('questionArea').style.display = 'block';
            
            loadQuizQuestion();
        }

        // ======================
        // å®ç”¨å·¥å…·åŠŸèƒ½
        // ======================
        function parseUDSMessage() {
            const input = document.getElementById('messageInput').value.trim();
            const resultDiv = document.getElementById('parseResult');
            
            if (!input) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">è¯·è¾“å…¥UDSæ¶ˆæ¯</div>';
                return;
            }
            
            // ç®€å•è§£æï¼šå‡è®¾è¾“å…¥æ˜¯ç©ºæ ¼åˆ†éš”çš„åå…­è¿›åˆ¶æ•°
            const bytes = input.split(/\s+/).map(b => b.replace(/^0x/i, '')).filter(b => b.length > 0);
            
            if (bytes.length < 1) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">æ— æ•ˆçš„æ¶ˆæ¯æ ¼å¼</div>';
                return;
            }
            
            const serviceId = '0x' + bytes[0].toUpperCase();
            const serviceName = getServiceName(serviceId);
            
            let html = `
                <div><strong>æœåŠ¡ID:</strong> ${serviceId} (${serviceName})</div>
                <div><strong>æ¶ˆæ¯é•¿åº¦:</strong> ${bytes.length} å­—èŠ‚</div>
                <div><strong>å®Œæ•´æ¶ˆæ¯:</strong> ${bytes.join(' ')}</div>
            `;
            
            // å¦‚æœæ˜¯å·²çŸ¥æœåŠ¡ï¼Œæ˜¾ç¤ºæ›´å¤šè¯¦ç»†ä¿¡æ¯
            if (serviceName && serviceName !== 'æœªçŸ¥æœåŠ¡') {
                html += `<div><strong>æœåŠ¡æè¿°:</strong> ${UDS_SERVICES[parseInt(serviceId, 16)]?.description || ''}</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        function getServiceName(serviceId) {
            const id = parseInt(serviceId, 16);
            if (UDS_SERVICES[id]) {
                return UDS_SERVICES[id].name;
            }
            return 'æœªçŸ¥æœåŠ¡';
        }

        function convertNumber() {
            const input = document.getElementById('hexInput').value.trim();
            const resultDiv = document.getElementById('convertResult');
            
            if (!input) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">è¯·è¾“å…¥æ•°å€¼</div>';
                return;
            }
            
            try {
                // å°è¯•è§£æå„ç§æ ¼å¼çš„è¾“å…¥
                let num = NaN;
                let inputLower = input.toLowerCase();
                
                if (inputLower.startsWith('0x')) {
                    // Remove '0x' prefix and parse as hexadecimal
                    const hexValue = input.substring(2);
                    if (!/^[0-9A-Fa-f]+$/.test(hexValue)) {
                        throw new Error('åå…­è¿›åˆ¶å€¼åŒ…å«æ— æ•ˆå­—ç¬¦');
                    }
                    num = parseInt(hexValue, 16);
                } else if (inputLower.startsWith('0b')) {
                    // Remove '0b' prefix and parse as binary
                    const binaryValue = input.substring(2);
                    if (!/^[01]+$/.test(binaryValue)) {
                        throw new Error('äºŒè¿›åˆ¶å€¼åŒ…å«æ— æ•ˆå­—ç¬¦');
                    }
                    num = parseInt(binaryValue, 2);
                } else if (/^[0-9]+$/.test(input)) {
                    // Parse as decimal
                    num = parseInt(input, 10);
                } else {
                    throw new Error('æ— æ³•è§£æè¾“å…¥æ ¼å¼ï¼Œè¯·ä½¿ç”¨åè¿›åˆ¶ã€åå…­è¿›åˆ¶(0x...)æˆ–äºŒè¿›åˆ¶(0b...)æ ¼å¼');
                }
                
                if (isNaN(num) || !isFinite(num)) {
                    throw new Error('æ— æ•ˆæ•°å­—');
                }
                
                resultDiv.innerHTML = `
                    <div><strong>åè¿›åˆ¶:</strong> ${num}</div>
                    <div><strong>åå…­è¿›åˆ¶:</strong> 0x${num.toString(16).toUpperCase()}</div>
                    <div><strong>äºŒè¿›åˆ¶:</strong> 0b${num.toString(2)}</div>
                `;
            } catch (e) {
                resultDiv.innerHTML = `<div style="color: var(--error-color);">é”™è¯¯: ${e.message}</div>`;
            }
        }

        function lookupServiceId() {
            const input = document.getElementById('serviceIdInput').value.trim();
            const resultDiv = document.getElementById('serviceResult');
            
            if (!input) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">è¯·è¾“å…¥æœåŠ¡ID</div>';
                return;
            }
            
            let serviceId = input.toLowerCase();
            
            // æ ‡å‡†åŒ–IDæ ¼å¼
            if (!serviceId.startsWith('0x')) {
                serviceId = '0x' + serviceId.replace(/^0x/i, '');
            }
            
            const id = parseInt(serviceId, 16);
            
            if (isNaN(id)) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">æ— æ•ˆçš„æœåŠ¡IDæ ¼å¼</div>';
                return;
            }
            
            if (UDS_SERVICES[id]) {
                const service = UDS_SERVICES[id];
                resultDiv.innerHTML = `
                    <div><strong>æœåŠ¡ID:</strong> ${serviceId.toUpperCase()}</div>
                    <div><strong>æœåŠ¡åç§°:</strong> ${service.name}</div>
                    <div><strong>æè¿°:</strong> ${service.description}</div>
                    <div><strong>è¯¦ç»†ä¿¡æ¯:</strong></div>
                    <ul style="margin-left: var(--spacing-lg);">
                        ${service.details.map(d => `<li>${d}</li>`).join('')}
                    </ul>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div>æœåŠ¡ID: ${serviceId.toUpperCase()} æœªåœ¨æ ‡å‡†UDSæœåŠ¡ä¸­æ‰¾åˆ°</div>
                    <div>è¿™å¯èƒ½æ˜¯OEMç‰¹å®šçš„è‡ªå®šä¹‰æœåŠ¡</div>
                `;
            }
        }

        function lookupDID() {
            const input = document.getElementById('didInput').value.trim();
            const resultDiv = document.getElementById('didResult');
            
            if (!input) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">è¯·è¾“å…¥DID</div>';
                return;
            }
            
            let did = input.toLowerCase();
            
            // æ ‡å‡†åŒ–DIDæ ¼å¼
            if (!did.startsWith('0x')) {
                did = '0x' + did.replace(/^0x/i, '');
            }
            
            const id = parseInt(did, 16);
            
            if (isNaN(id)) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">æ— æ•ˆçš„DIDæ ¼å¼</div>';
                return;
            }
            
            if (UDS_DIDS[id]) {
                resultDiv.innerHTML = `
                    <div><strong>DID:</strong> ${did.toUpperCase()}</div>
                    <div><strong>åç§°:</strong> ${UDS_DIDS[id]}</div>
                    <div><strong>æè¿°:</strong> ${getDidDescription(id)}</div>
                    <div><strong>ç”¨é€”:</strong> ${getDidUsage(id)}</div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div>DID: ${did.toUpperCase()} ä¸åœ¨æ ‡å‡†DIDåˆ—è¡¨ä¸­</div>
                    <div>è¿™å¯èƒ½æ˜¯å‚å•†ç‰¹å®šçš„DID</div>
                `;
            }
        }

        function getDidDescription(id) {
            const descriptions = {
                0xF190: "è½¦è¾†çš„17ä½è¯†åˆ«ç ",
                0xF191: "è½¦è¾†çš„ç”Ÿäº§åºåˆ—å·",
                0xF192: "ECUå½“å‰è¿è¡Œçš„è½¯ä»¶ç‰ˆæœ¬",
                0xF193: "ECUç¡¬ä»¶ç‰ˆæœ¬ä¿¡æ¯",
                0xF194: "ECUçš„åç§°æ ‡è¯†",
                0xF197: "ECUå½“å‰è¿è¡Œçš„è½¯ä»¶ç‰ˆæœ¬",
                0xF198: "ECUè½¯ä»¶çš„é›¶ä»¶ç¼–å·"
            };
            return descriptions[id] || "æœªçŸ¥æ•°æ®";
        }

        function getDidUsage(id) {
            const usages = {
                0xF190: "ç”¨äºè½¦è¾†èº«ä»½è¯†åˆ«",
                0xF197: "ç”¨äºéªŒè¯ECUè½¯ä»¶ç‰ˆæœ¬",
                0xF198: "ç”¨äºECUè¯†åˆ«å’ŒåŒ¹é…",
                0xF193: "ç”¨äºç¡¬ä»¶å…¼å®¹æ€§éªŒè¯"
            };
            return usages[id] || "ä¸€èˆ¬è¯Šæ–­æ•°æ®";
        }

        function lookupRoutineId() {
            const input = document.getElementById('routineIdInput').value.trim();
            const resultDiv = document.getElementById('routineResult');
            
            if (!input) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">è¯·è¾“å…¥ä¾‹ç¨‹ID</div>';
                return;
            }
            
            let routineId = input.toLowerCase();
            
            // æ ‡å‡†åŒ–ä¾‹ç¨‹IDæ ¼å¼
            if (!routineId.startsWith('0x')) {
                routineId = '0x' + routineId.replace(/^0x/i, '');
            }
            
            const id = parseInt(routineId, 16);
            
            if (isNaN(id)) {
                resultDiv.innerHTML = '<div style="color: var(--error-color);">æ— æ•ˆçš„ä¾‹ç¨‹IDæ ¼å¼</div>';
                return;
            }
            
            if (UDS_ROUTINES[id]) {
                resultDiv.innerHTML = `
                    <div><strong>ä¾‹ç¨‹ID:</strong> ${routineId.toUpperCase()}</div>
                    <div><strong>åç§°:</strong> ${UDS_ROUTINES[id]}</div>
                    <div><strong>æè¿°:</strong> ${getRoutineDescription(id)}</div>
                    <div><strong>æ‰§è¡Œå‚æ•°:</strong> ${getRoutineParameters(id)}</div>
                    <div><strong>è¿”å›å€¼:</strong> ${getRoutineResult(id)}</div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div>ä¾‹ç¨‹ID: ${routineId.toUpperCase()} ä¸åœ¨æ ‡å‡†ä¾‹ç¨‹åˆ—è¡¨ä¸­</div>
                    <div>è¿™å¯èƒ½æ˜¯å‚å•†ç‰¹å®šçš„ä¾‹ç¨‹</div>
                `;
            }
        }

        function getRoutineDescription(id) {
            const descriptions = {
                0xFF00: "æ‰§è¡ŒECUåˆ·å†™è¿‡ç¨‹",
                0xFF01: "æ“¦é™¤ECUå†…å­˜æŒ‡å®šåŒºåŸŸ",
                0xFF02: "æ£€æŸ¥ç¼–ç¨‹ä¾èµ–å…³ç³»",
                0x0202: "æ§åˆ¶ECUè¾“å…¥è¾“å‡ºçŠ¶æ€",
                0x0317: "æ¸…é™¤ç³»ç»Ÿè®°å½•çš„ä¸å¯ä¿¡æ•…éšœç ",
                0x0318: "è®¾ç½®DTCé•œåƒåŠŸèƒ½",
                0x0319: "æ¸…é™¤DTCé•œåƒæ•°æ®"
            };
            return descriptions[id] || "æ‰§è¡Œç‰¹å®šçš„ECUåŠŸèƒ½";
        }

        function getRoutineParameters(id) {
            const params = {
                0xFF00: "å†…å­˜åœ°å€å’Œæ•°æ®",
                0xFF01: "å†…å­˜åœ°å€èŒƒå›´",
                0xFF02: "ç¼–ç¨‹ä¾èµ–æ£€æŸ¥å‚æ•°",
                0x0202: "æ§åˆ¶å‚æ•°",
                0x0317: "DTCä»£ç ",
                0x0318: "DTCé•œåƒè®¾ç½®å‚æ•°",
                0x0319: "DTCé•œåƒæ¸…é™¤å‚æ•°"
            };
            return params[id] || "æ— å‚æ•°æˆ–ç‰¹å®šå‚æ•°";
        }

        function getRoutineResult(id) {
            const results = {
                0xFF00: "åˆ·å†™çŠ¶æ€",
                0xFF01: "æ“¦é™¤çŠ¶æ€",
                0xFF02: "ä¾èµ–æ£€æŸ¥ç»“æœ",
                0x0202: "æ§åˆ¶ç»“æœ",
                0x0317: "æ¸…é™¤çŠ¶æ€",
                0x0318: "è®¾ç½®ç»“æœ",
                0x0319: "æ¸…é™¤ç»“æœ"
            };
            return results[id] || "æ‰§è¡Œç»“æœ";
        }

        // ======================
        // äº‹ä»¶ç›‘å¬
        // ======================
        // ä¸ºæ‰€æœ‰æ ‡ç­¾æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('[data-tab]').forEach(button => {
            button.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                showTab(tabName);
            });
        });

        // é”®ç›˜å¯¼èˆªæ”¯æŒ
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                // æ·»åŠ ç„¦ç‚¹æŒ‡ç¤ºå™¨æ ·å¼
                document.body.classList.add('keyboard-navigation');
            }
        });

        window.addEventListener('mousedown', function() {
            document.body.classList.remove('keyboard-navigation');
        });

        // ======================
        // åˆå§‹åŒ–
        // ======================
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);
    </script>
</body>
</html>