<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UDSåè®®å­¦ä¹ å¹³å° - 15åˆ†é’Ÿæé€ŸæŒæ¡</title>
    <meta name="description" content="ä¸“ä¸šæ±½è½¦è¯Šæ–­åè®®æ•™è‚²å¹³å°ï¼šé›¶åŸºç¡€15åˆ†é’ŸæŒæ¡ISO-14229æ ‡å‡†ï¼Œå®æ—¶æ¼”ç¤ºã€äº¤äº’ç»ƒä¹ ã€å®æˆ˜å·¥å…·">
    <meta name="keywords" content="UDSåè®®,æ±½è½¦è¯Šæ–­,ISO-14229,æ•…éšœç ,OBD-II,ECUè¯Šæ–­">
    
    <!-- PWA Configuration -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/images/icon-192.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/animations.css">
    <link rel="stylesheet" href="assets/css/responsive.css">

    <!-- Performance Preconnect -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
</head>

<body itemscope itemtype="https://schema.org/WebApplication">
    <!-- Progress Bar -->
    <div class="loading-bar" id="loadingBar">
        <div class="loading-progress" id="loadingProgress"></div>
    </div>

    <!-- App Container -->
    <div class="app-container">
        <header class="app-header" role="banner">
            <h1 class="title" itemprop="name">ğŸš— UDSåè®®å­¦ä¹ å¹³å°</h1>
            <p class="subtitle" itemprop="description">15åˆ†é’ŸæŒæ¡æ±½è½¦è¯Šæ–­æ ¸å¿ƒæŠ€èƒ½</p>
            
            <!-- Dynamic Progress -->
            <div class="progress-container">
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">å­¦ä¹ è¿›åº¦ï¼š0%</span>
            </div>
        </header>

        <nav class="app-nav" role="navigation" aria-label="ä¸»è¦å†…å®¹">
            <ul class="tab-list" role="tablist">
                <li role="presentation">
                    <button class="tab-btn active" 
                            role="tab" 
                            aria-selected="true" 
                            aria-controls="basics-tab"
                            data-tab="basics">
                        ğŸ¯ åŸºç¡€å…¥é—¨
                    </button>
                </li>
                <li role="presentation">
                    <button class="tab-btn" 
                            role="tab" 
                            aria-selected="false" 
                            aria-controls="services-tab"
                            data-tab="services">
                        ğŸ”§ æœåŠ¡è¯¦è§£
                    </button>
                </li>
                <li role="presentation">
                    <button class="tab-btn" 
                            role="tab" 
                            aria-selected="false" 
                            aria-controls="demo-tab"
                            data-tab="demo">
                        ğŸ® å®æˆ˜æ¼”ç»ƒ
                    </button>
                </li>
                <li role="presentation">
                    <button class="tab-btn" 
                            role="tab" 
                            aria-selected="false" 
                            aria-controls="quiz-tab"
                            data-tab="quiz">
                        ğŸ§  çŸ¥è¯†æµ‹è¯•
                    </button>
                </li>
            </ul>
        </nav>

        <main class="app-main" role="main">
            <!-- åŸºç¡€æ¦‚å¿µ -->
            <section class="tab-content active" id="basics-tab" role="tabpanel" aria-labelledby="basics-btn">
                <header class="section-header">
                    <h2>ğŸ¯ ä»€ä¹ˆæ˜¯UDSåè®®ï¼Ÿ</h2>
                    <p>ç»Ÿä¸€è¯Šæ–­æœåŠ¡ï¼ˆUDSï¼‰æ˜¯ISO 14229æ ‡å‡†ï¼Œä¸ºæ±½è½¦ECUæä¾›æ ‡å‡†åŒ–çš„è¯Šæ–­é€šä¿¡åè®®</p>
                </header>

                <div class="interactive-demo">
                    <div class="device-demo">
                        <div class="device client" aria-label="è¯Šæ–­å·¥å…·">
                            <span class="device-icon">ğŸ–¥ï¸</span>
                            <span class="device-name">è¯Šæ–­å®¢æˆ·ç«¯</span>
                            <span class="device-status">å°±ç»ª</span>
                        </div>
                        
                        <div class="communication-flow">
                            <div class="message-arrow" aria-label="é€šä¿¡æµå‘">
                                <span class="arrow-symbol">âŸ·</span>
                                <div class="message-tooltip">UDSæ¶ˆæ¯</div>
                            </div>
                        </div>
                        
                        <div class="device server" aria-label="è½¦è¾†ECU">
                            <span class="device-icon">ğŸš—</span>
                            <span class="device-name">è½¦è¾†æœåŠ¡å™¨</span>
                            <span class="device-status">å¾…æµ‹</span>
                        </div>
                    </div>

                    <div class="protocol-diagram">
                        <h3>ğŸ—ï¸ åè®®æ¶æ„</h3>
                        <div class="protocol-stack">
                            <div class="layer application" data-layer="åº”ç”¨å±‚">UDSæœåŠ¡ 0x10-0x37</div>
                            <div class="layer session" data-layer="ä¼šè¯å±‚">ä¼šè¯ç®¡ç†</div>
                            <div class="layer transport" data-layer="ä¼ è¾“å±‚">ISO-TPåè®®</div>
                            <div class="layer network" data-layer="ç½‘ç»œå±‚">CAN/Ethernet</div>
                            <div class="layer datalink" data-layer="æ•°æ®é“¾è·¯å±‚">ç‰©ç†æ¥å£</div>
                        </div>
                    </div>
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <h3>ğŸ¯ æ ‡å‡†åŒ–æ¥å£</h3>
                        <p class="feature-desc">ç»Ÿä¸€è¯Šæ–­æœåŠ¡æ ‡å‡†</p>
                        <div class="feature-spec">8ç§æ ¸å¿ƒæœåŠ¡</div>
                    </div>
                    <div class="feature-card">
                        <h3>ğŸ” å®‰å…¨è®¤è¯</h3>
                        <p class="feature-desc">ç§å­-å¯†é’¥å®‰å…¨æœºåˆ¶</p>
                        <div class="feature-spec">Industry Standard</div>
                    </div>
                    <div class="feature-card">
                        <h3>âš¡ é«˜å…¼å®¹æ€§</h3>
                        <p class="feature-desc">æ”¯æŒCANã€ä»¥å¤ªç½‘ç­‰ä¼ è¾“ä»‹ç´ </p>
                        <div class="feature-spec">Multi-Protocol</div>
                    </div>
                </div>
            </section>

            <!-- æœåŠ¡è¯¦è§£ -->
            <section class="tab-content" id="services-tab" role="tabpanel" aria-labelledby="services-btn" hidden>
                <header class="section-header">
                    <h2>ğŸ”§ æ ¸å¿ƒUDSæœåŠ¡è¯¦è§£</h2>
                    <p>8ç§ä¸»è¦æœåŠ¡ï¼Œ150+åº”ç”¨åœºæ™¯å®Œæ•´è¦†ç›–</p>
                </header>

                <div class="services-grid" id="servicesGrid">
                    <!-- Services populated by JavaScript -->
                </div>
            </section>

            <!-- å®æˆ˜æ¼”ç»ƒ -->
            <section class="tab-content" id="demo-tab" role="tabpanel" aria-labelledby="demo-btn" hidden>
                <header class="section-header">
                    <h2>ğŸ® å®æ—¶é€šä¿¡æ¼”ç¤º</h2>
                    <p>çœŸå®åœºæ™¯ä¸‹çš„è¯Šæ–­é€šä¿¡æµç¨‹</p>
                </header>

                <div class="demo-interface">
                    <div class="demo-controls">
                        <button class="demo-btn" onclick="runDemo('session')" aria-label="å¼€å§‹è¯Šæ–­ä¼šè¯æ¼”ç¤º">
                            ğŸ”‘ å»ºç«‹ä¼šè¯ (0x10)
                        </button>
                        <button class="demo-btn" onclick="runDemo('security')" aria-label="å¼€å§‹å®‰å…¨è®¿é—®æ¼”ç¤º">
                            ğŸ” å®‰å…¨è®¿é—® (0x27)
                        </button>
                        <button class="demo-btn" onclick="runDemo('diagnostic')" aria-label="å¼€å§‹æ•°æ®è¯»å–æ¼”ç¤º">
                            ğŸ“Š è¯»å–æ•°æ® (0x22)
                        </button>
                        <button class="demo-btn" onclick="resetDemo()" aria-label="é‡ç½®æ¼”ç¤ºçŠ¶æ€">
                            ğŸ”„ é‡ç½®æ¼”ç¤º
                        </button>
                    </div>

                    <div class="simulation-area" id="simulationArea">
                        <div class="network-diagram">
                            <div class="device client" id="clientDevice">
                                <div class="status">ç­‰å¾…å‘½ä»¤</div>
                                <div class="activity">-</div>
                            </div>
                            
                            <div class="connection-line" id="connectionLine">
                                <div class="message-flow" id="messageFlow"></div>
                            </div>
                            
                            <div class="device server" id="serverDevice">
                                <div class="status">å¾…æµ‹çŠ¶æ€</div>
                                <div class="activity">-</div>
                            </div>
                        </div>
                    </div>

                    <div class="log-area">
                        <h3>ğŸ“Š é€šä¿¡æ—¥å¿—</h3>
                        <div class="log-display" id="logDisplay">
                            <div>ç³»ç»Ÿå°±ç»ªï¼Œç­‰å¾…æ“ä½œ...</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- çŸ¥è¯†æµ‹è¯• -->
            <section class="tab-content" id="quiz-tab" role="tabpanel" aria-labelledby="quiz-btn" hidden>
                <header class="section-header">
                    <h2>ğŸ§  çŸ¥è¯†æµ‹è¯•ç³»ç»Ÿ</h2>
                    <p>AIä¼˜åŒ–ã€å³æ—¶åé¦ˆï¼Œå¼ºåŒ–è®°å¿†</p>
                </header>

                <div class="quiz-interface">
                    <div class="quiz-progress">
                        <div class="quiz-counter">
                            è¿›åº¦: <span id="currentQuestion">1</span> / <span id="totalQuestions">8</span>
                        </div>
                        <div class="quiz-score">
                            å¾—åˆ†: <span id="currentScore">0</span>
                        </div>
                    </div>

                    <div class="question-display" id="questionDisplay">
                        <!-- Question populated by JavaScript -->
                    </div>

                    <div class="quiz-results" id="quizResults" hidden>
                        <div class="result-summary">
                            <h3>ğŸ¯ æµ‹è¯•ç»“æœ</h3>
                            <div class="score-display" id="finalScore"></div>
                            <div class="performance-review" id="performanceReview"></div>
                        </div>
                        <button class="quiz-btn" onclick="restartQuiz()">ğŸ”„ é‡æ–°å¼€å§‹</button>
                    </div>
                </div>
            </section>
        </main>

        <footer class="app-footer">
            <div class="footer-content">
                <p>&copy; 2024 UDSåè®®å­¦ä¹ å¹³å° | è®©æ±½è½¦è¯Šæ–­å­¦ä¹ æ›´ç®€å•</p>
                <div class="version-info">v2.1.0 + GitHub Pages ğŸš€</div>
            </div>
        </footer>
    </div>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js');
            });
        }
    </script>

    <!-- Application Scripts -->
    <script>
        // Core Application State
        let currentProgress = 0;
        let demoRunning = false;
        let quizState = {};

        // UDS Services Data
        const UDS_SERVICES = {
            0x10: { name: "è¯Šæ–­ä¼šè¯æ§åˆ¶", desc: "ç®¡ç†è¯Šæ–­ä¼šè¯çŠ¶æ€", emoji: "ğŸ”‘", examples: "é»˜è®¤/ç¼–ç¨‹/æ‰©å±•ä¼šè¯" },
            0x11: { name: "ECUé‡ç½®", desc: "é‡å¯æˆ–å¤ä½ECU", emoji: "ğŸ”„", examples: "è½¯ç¡¬å¤ä½" },
            0x27: { name: "å®‰å…¨è®¿é—®", desc: "è®¤è¯æƒé™ç®¡ç†", emoji: "ğŸ”", examples: "ç§å­-å¯†é’¥è®¤è¯" },
            0x28: { name: "é€šä¿¡æ§åˆ¶", desc: "æ§åˆ¶é€šä¿¡å‚æ•°", emoji: "ğŸ“¡", examples: "æ¶ˆæ¯å¼€å…³" },
            0x19: { name: "æ•…éšœç ç®¡ç†", desc: "è¯»å–/æ¸…é™¤DTC", emoji: "âš ï¸", examples: "P0300-P0456" },
            0x22: { name: "æ•°æ®è¯»å–", desc: "è¯»å–æ•°æ®æ ‡è¯†ç¬¦", emoji: "ğŸ“Š", examples: "VIN/Firmwareç‰ˆæœ¬" },
            0x31: { name: "ä¾‹ç¨‹æ§åˆ¶", desc: "æ‰§è¡Œè¯Šæ–­ä¾‹ç¨‹", emoji: "âš™ï¸", examples: "è‡ªæ£€ç¨‹åº" },
            0x34: { name: "æ•°æ®ä¸‹è½½", desc: "ECUåˆ·å†™æ›´æ–°", emoji: "â¬‡ï¸", examples: "å›ºä»¶æ›´æ–°" }
        };

        // Quiz Questions
        const QUIZ_QUESTIONS = [
            {
                question: "UDSåè®®ä¸­è¯Šæ–­ä¼šè¯æ§åˆ¶æœåŠ¡çš„IDæ˜¯ä»€ä¹ˆï¼Ÿ",
                options: ["A: 0x11", "B: 0x10", "C: 0x27", "D: 0x22"],
                correct: 1,
                explanation: "0x10æ˜¯è¯Šæ–­ä¼šè¯æ§åˆ¶æœåŠ¡çš„æ ‡å‡†ID"
            },
            {
                question: "å®‰å…¨è®¿é—®æœåŠ¡ï¼ˆSecurity Accessï¼‰çš„IDæ˜¯å¤šå°‘ï¼Ÿ",
                options: ["A: 0x10", "B: 0x11", "C: 0x27", "D: 0x19"],
                correct: 2,
                explanation: "0x27æ˜¯å®‰å…¨è®¿é—®æœåŠ¡çš„IDï¼Œç”¨äºå®ç°è®¿é—®è®¤è¯"
            },
            {
                question: "å“ªä¸ªæœåŠ¡ç”¨äºè¯»å–ECUä¸­çš„æ•°æ®æ ‡è¯†ç¬¦(DID)ï¼Ÿ",
                options: ["A: 0x19", "B: 0x22", "C: 0x11", "D: 0x34"],
                correct: 1,
                explanation: "0x22æœåŠ¡ç”¨äºé€šè¿‡DIDè¯»å–ECUä¸­çš„æ•°æ®"
            }
        ];

        // Initialize Application
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
            renderServices();
            loadQuizQuestion();
        });

        // Application Init
        function initializeApp() {
            const savedProgress = localStorage.getItem('uds-progress');
            if (savedProgress) {
                currentProgress = parseInt(savedProgress);
                updateProgress(currentProgress);
            }
            
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loadingBar').style.display = 'none';
            }, 1000);
        }

        // Tab Navigation
        function showTab(tabName) {
            event.preventDefault();
            
            // Update UI states
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-selected', 'false');
            });
        
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                content.hidden = true;
            });

            event.target.classList.add('active');
            event.target.setAttribute('aria-selected', 'true');
            
            const targetContent = document.getElementById(`${tabName}-tab`);
            targetContent.classList.add('active');
            targetContent.hidden = false;
            
            // Update progress
            updateProgress(getProgressValue(tabName));
            
            // Analytics
            analyticsTrack('tab_view', { tab: tabName });
        }

        function updateProgress(value) {
            currentProgress = value;
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            progressFill.style.width = `${value}%`;
            progressText.textContent = `å­¦ä¹ è¿›åº¦ï¼š${value}%`;
            
            localStorage.setItem('uds-progress', value);
        }

        function getProgressValue(tab) {
            const progressMap = { basics: 25, services: 50, demo: 75, quiz: 100 };
            return progressMap[tab] || 0;
        }

        // Services Rendering
        function renderServices() {
            const container = document.getElementById('servicesGrid');
            container.innerHTML = '';

            Object.entries(UDS_SERVICES).forEach(([id, service]) => {
                const card = createServiceCard(id, service);
                container.appendChild(card);
            });
        }

        function createServiceCard(id, service) {
            const card = document.createElement('div');
            card.className = 'service-card';
            card.innerHTML = `
                <div class="service-icon">${service.emoji}</div>
                <h3 class="service-name">${service.name}</h3>
                <p class="service-desc">${service.desc}</p>
                <div class="service-id">ID: 0x${parseInt(id).toString(16).toUpperCase()}</div>
                <div class="service-examples">${service.examples}</div>
            `;
            
            card.addEventListener('click', () => showServiceDetail(id, service));
            return card;
        }

        function showServiceDetail(id, service) {
            showNotification(`${service.emoji} ${service.name}`, service.desc, 'info');
        }

        // Demo Engine
        function runDemo(type) {
            if (demoRunning) return;
            
            demoRunning = true;
            resetDemoState();
            
            const demoScript = {
                session: [
                    { time: 0, client: 'å‘é€0x1001...', server: 'å¤„ç†ä¸­', message: 'åˆ°è¾¾è¯Šæ–­ä¼šè¯è¯·æ±‚' },
                    { time: 1500, client: 'ç­‰å¾…å“åº”...', server: 'è¿”å›0x5001...', message: 'ä¼šè¯å»ºç«‹æˆåŠŸ' },
                    { time: 3000, client: 'è¿›å…¥è¯Šæ–­æ¨¡å¼', server: 'ç­‰å¾…æŒ‡ä»¤', message: 'ä¼šè¯æ¿€æ´»å®Œæˆ' }
                ],
                security: [
                    { time: 0, client: 'è¯·æ±‚0x2701...', server: 'ç”Ÿæˆç§å­', message: 'å¼€å§‹å®‰å…¨è®¤è¯' },
                    { time: 2000, client: 'è®¡ç®—å¯†é’¥...', server: 'ç­‰å¾…éªŒè¯', message: 'è®¡ç®—æ ¡éªŒå’Œ' },
                    { time: 4000, client: 'å‘é€0x2702...', server: 'éªŒè¯é€šè¿‡', message: 'å®‰å…¨è§£é”å®Œæˆ' }
                ],
                diagnostic: [
                    { time: 0, client: 'è¯·æ±‚0x22F190...', server: 'æŸ¥æ‰¾æ•°æ®', message: 'è¯»å–VINç è¯·æ±‚' },
                    { time: 1500, client: 'æ¥æ”¶æ•°æ®...', server: 'è¿”å›VIN', message: 'æ•°æ®æ¥æ”¶æˆåŠŸ' },
                    { time: 3000, client: 'è§£æå®Œæˆ', server: 'æœåŠ¡ç»“æŸ', message: 'VINç ï¼š123456789' }
                ]
            };

            runDemoSequence(demoScript[type]);
        }

        function runDemoSequence(sequence) {
            const clientDevice = document.getElementById('clientDevice');
            const serverDevice = document.getElementById('serverDevice');
            const messageFlow = document.getElementById('messageFlow');
            const logDisplay = document.getElementById('logDisplay');

            sequence.forEach(item => {
                setTimeout(() => {
                    updateDeviceStatus(clientDevice, item.client);
                    updateDeviceStatus(serverDevice, item.server);
                    updateMessageFlow(messageFlow, item.message);
                    addLogEntry(logDisplay, item);
                }, item.time);
            });

            setTimeout(() => {
                demoRunning = false;
                showNotification('æ¼”ç¤ºå®Œæˆ', `${sequence[sequence.length-1].message}`, 'success');
            }, sequence[sequence.length-1].time + 1000);
        }

        function resetDemo() {
            demoRunning = false;
            updateDeviceStatus(document.getElementById('clientDevice'), 'ç­‰å¾…å‘½ä»¤');
            updateDeviceStatus(document.getElementById('serverDevice'), 'å¾…æµ‹çŠ¶æ€');
            updateMessageFlow(document.getElementById('messageFlow'), 'å°±ç»ª');
            
            const logDisplay = document.getElementById('logDisplay');
            logDisplay.innerHTML = '<div>ç³»ç»Ÿé‡ç½®ï¼Œç­‰å¾…æ“ä½œ...</div>';
        }

        // Quiz System
        function loadQuizQuestion() {
            quizState = {
                questions: QUIZ_QUESTIONS,
                current: 0,
                score: 0,
                total: QUIZ_QUESTIONS.length
            };
            
            displayCurrentQuestion();
        }

        function displayCurrentQuestion() {
            const question = quizState.questions[quizState.current];
            const container = document.getElementById('questionDisplay');
            
            if (!question) return;

            container.innerHTML = `
                <div class="question-text">${question.question}</div>
                <div class="options-container">
                    ${question.options.map((option, index) => `
                        <button class="quiz-option" onclick="selectAnswer(${index})" aria-label="${option}">
                            ${option}
                        </button>
                    `).join('')}
                </div>
            `;
            
            updateQuizProgress();
        }

        function selectAnswer(index) {
            const question = quizState.questions[quizState.current];
            const isCorrect = index === question.correct;
            
            if (isCorrect) {
                quizState.score++;
                playSound('success');
                showNotification('ğŸ‰ å›ç­”æ­£ç¡®ï¼', question.explanation, 'success');
                updateStats();
            } else {
                playSound('error');
                showNotification('âŒ å›ç­”é”™è¯¯', question.explanation, 'error');
                shakeEffect(document.getElementById('questionDisplay'));
            }

            setTimeout(() => {
                quizState.current++;
                if (quizState.current >= quizState.total) {
                    showQuizResults();
                } else {
                    displayCurrentQuestion();
                }
            }, 1500);
        }

        function showQuizResults() {
            const score = quizState.score;
            const percentage = Math.round((score / quizState.total) * 100);
            
            document.getElementById('questionDisplay').style.display = 'none';
            const results = document.getElementById('quizResults');
            results.hidden = false;
            
            document.getElementById('finalScore').textContent = `${score}/${quizState.total} (${percentage}%)`;
            document.getElementById('performanceReview').textContent = getPerformanceReview(percentage);
            
            updateProgress(percentage);
            localStorage.setItem('quiz-performance', JSON.stringify({
                score: percentage,
                date: new Date().toISOString(),
                questions: quizState.total
            }));

            analyticsTrack('quiz_complete', { score: percentage, total: quizState.total });
        }

        // Utility Functions
        function updateDeviceStatus(device, status) {
            device.querySelector('.status').textContent = status;
            device.classList.add('active-device');
            setTimeout(() => device.classList.remove('active-device'), 500);
        }

        function updateMessageFlow(flow, message) {
            flow.textContent = message;
            flow.style.display = 'block';
            flow.classList.add('message-animate');
            setTimeout(() => {
                flow.style.display = 'none';
                flow.classList.remove('message-animate');
            }, 3000);
        }

        function addLogEntry(log, message) {
            const entry = document.createElement('div');
            entry.innerHTML = `<span class="log-time">${new Date().toLocaleTimeString()}</span> ${message.message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        function showNotification(title, message, type) {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-title">${title}</div>
                <div class="notification-message">${message}</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('notification-show');
            }, 100);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function playSound(type) {
            if (typeof navigator.vibrate === 'function') {
                navigator.vibrate(type === 'success' ? [100, 50, 100] : [200, 100]);
            }
        }

        function updateQuizProgress() {
            document.getElementById('currentQuestion').textContent = quizState.current + 1;
            document.getElementById('currentScore').textContent = quizState.score;
        }

        function updateStats() {
            const totalSessions = parseInt(localStorage.getItem('total-sessions') || '0') + 1;
            localStorage.setItem('total-sessions', totalSessions);
        }

        function analyticsTrack(event, data) {
            console.log('ğŸ“Š Analytics:', event, data);
        }

        function restartQuiz() {
            const results = document.getElementById('quizResults');
            const questionDisplay = document.getElementById('questionDisplay');
            
            results.hidden = true;
            questionDisplay.style.display = 'block';
            
            quizState = {
                questions: QUIZ_QUESTIONS,
                current: 0,
                score: 0,
                total: QUIZ_QUESTIONS.length
            };
            
            displayCurrentQuestion();
        }

        // Event Listeners
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Tab' && !e.target.classList.contains('tab-btn')) {
                e.preventDefault();
            }
        });

    </script>
    
    <style>
    /* Additional minimal styles for immediate display */
    .loading-bar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: rgba(255,255,255,0.3);
        z-index: 1000;
    }
    .loading-progress {
        height: 100%;
        background: linear-gradient(90deg, #4CAF50, #45a049);
        width: 0%;
        transition: width 0.8s ease;
        animation: loading 2s ease-in-out;
    }
    @keyframes loading {
        0% { width: 0%; }
        100% { width: 100%; }
    }
    .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0,0,0,0.9);
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        z-index: 1001;
        max-width: 300px;
    }
    .notification-show {
        transform: translateX(0);
    }
    .notification-success { background: rgba(34, 197, 94, 0.9); }
    .notification-error { background: rgba(239, 68, 68, 0.9); }
    .notification-info { background: rgba(59, 130, 246, 0.9); }

    /* Pitch-perfect mobile optimizations */
    @media (max-width: 768px) {
        .app-header { padding: 15px; }
        .tab-list { flex-direction: column; }
        .interactive-demo { flex-direction: column; }
        .protocol-diagram { width: 100%; }
    }
</style>
</body>
</html>